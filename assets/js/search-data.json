{"0": {
    "doc": "Authentication API",
    "title": "Overview",
    "content": "This API is based on the Authorization Code Flow of OpenID Connect 1.0. It allows you to verify the identity of an end-user based on the authentication performed by an authorization server, as well as to obtain basic profile information about the end-user. The diagram below describes the Authentication process and how your systems will be interacting with itsme® : . To get to this result please make sure you . | add itsme® button to your front-end page so the user can indicate he wishes to authenticate with itsme® : itsme® button specifications. | create the Authorization Request to authenticate the User. This request will redirect the user to the itsme® app. itsme® will then authenticates the user by asking him . | to enter his phone number on the itsme® sign-in page | authorize the release of some information to your application | to provide his credentials (itsme® code, fingerprint or FaceID) | . It is also in this Authorization Request that you will be able to request claims about the user and the Authentication event. | collect the Authorization Code once the user has been authenticated and redirected by itsme® to your mobile or web application. | exchange the Authorization Code for an ID token (e.g. identifying the user) and an Access Token. | Obtain the additional claims by presenting the access token to the itsme® UserInfo Endpoint if the required claims are not returned in the ID token. | Confirm the success of the operation and display a success message. | . ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#overview",
    "relUrl": "/authentication/#overview"
  },"1": {
    "doc": "Authentication API",
    "title": "Guides",
    "content": " ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#guides",
    "relUrl": "/authentication/#guides"
  },"2": {
    "doc": "Authentication API",
    "title": "Generate itsme® button",
    "content": "First, you will need to create a button to allow your users to authenticate with itsme®. Check the Button design guide before you start the integration. Upon clicking this button, the browser will redirect the User to our Front-End. itsme® then take care of authenticating him. ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#generate-itsme-button",
    "relUrl": "/authentication/#generate-itsme-button"
  },"3": {
    "doc": "Authentication API",
    "title": "Client Authentication methods",
    "content": "itsme® supports the following authentication methods to protect the exchange of sensitive information and ensure the requested information gets issued to a legitimate application and not some other party : . | asymmetric RSA key pair | symmetric shared secret | . itsme® recommend using the asymmetric RSA key pair method and allow you to rotate your keys without the need to sync with us. Asymmetric RSA . This method requires that each party exposes its public keys as a simple JWK Set document on a URI publicly accessible, and keep its private keys for itself. For itsme®, this URI can be retrieved from the itsme® Discovery document, using the “jwks_uri” key. Your private and public keys can be generated using your own tool or via Yeoman. If using Yeoman, you need to install generator-itsme with NPM: . $ npm install -g yo generator-itsme . After installation, run the generator: . $ yo itsme . The Yeoman tool will generate two files, the jwks_private.json which MUST be stored securely in your system, and the jwks_public.json which needs to be exposed as a JWK Set on a URI publicly accessible and have the HTTPS scheme. Whatever the tool you are choosing to create your key pairs, don't forget to send your JWK Set URI by email to onboarding@itsme.be and itsme® will make sure to complete the configuration for you in no time! Symmetric secret . This method requires the exchange of a static secret that will be used to authenticate with our Back-End. The client_secret value will be provided by itsme® when registering your project. ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#client-authentication-methods",
    "relUrl": "/authentication/#client-authentication-methods"
  },"4": {
    "doc": "Authentication API",
    "title": "Mapping the user",
    "content": "To sign in successfully in your web desktop, mobile web or mobile application, a given user must be mapped to a user account in your database. By default, your application Server will use the subject identifier, or sub claim, in the ID Token to identify and verify a user account. The sub claim is a string that uniquely identifies a given user account. The benefit of using a sub claim is that it will not change, even if other user attributes (email, phone number, etc) associated with that account are updated. The sub claim value must be mapped to the corresponding user in your application Server. If no user record is storing the sub claim value, then you should allow the user to associate his new or existing account to the sub. All these flows are depicted in the itsme® B2B portal. In a limited number of cases (e.g. technical issue,…) a user could ask itsme® to ‘delete’ his account. As a result the specific account will be ‘archived’ (for compliancy reasons) and thus also the unique identifier(s) (e.g. “sub”). If the same user would opt to re-create an itsme® afterwards, he will need to re-bind his itsme® account with your application server, in the same way as for the initial binding. After successful re-binding you will need to overwrite the initial reference with the new sub claim value in your database. ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#mapping-the-user",
    "relUrl": "/authentication/#mapping-the-user"
  },"5": {
    "doc": "Authentication API",
    "title": "API reference",
    "content": ". ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#api-reference",
    "relUrl": "/authentication/#api-reference"
  },"6": {
    "doc": "Authentication API",
    "title": "itsme® Discovery Document",
    "content": ". | RSA keys | Symmetric keys | . | GET https://idp.[e2e/prd].itsme.services/v2/.well-known/openid-configuration . | GET https://oidc.[e2e/prd].itsme.services/clientsecret-oidc/csapi/v0.1/.well-known/openid-configuration . | . To simplify implementations and increase flexibility, OpenID Connect allows the use of a Discovery Document, a JSON document containing key-value pairs which provide details about itsme® configuration, such as the . | Authorization, Token and userInfo Endpoints | supported claims | ... | . ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#itsme-discovery-document",
    "relUrl": "/authentication/#itsme-discovery-document"
  },"7": {
    "doc": "Authentication API",
    "title": "Authorization Request",
    "content": ". | RSA keys | Symmetric key | . | GET https://idp.[e2e/prd].itsme.services/v2/authorization . Parameters . | client_idREQUIRED | It identifies your application. This parameter value is generated during registration. | . | response_typeREQUIRED | This defines the processing flow to be used when forming the response. Because itsme® supports the Authorization Code Flow, this value MUST be code. | . | scopeREQUIRED | It allows your application to express the desired scope of the access request. Each scope returns a set of user attributes. The scopes an application should request depend on which user attributes your application needs. Once the user authorizes the requested scopes, his details are returned in an ID Token and are also available through the UserInfo Endpoint.All scope values must be space-separated.The basic (and required) scopes are openid and service. Beyond that, your application can ask for additional standard scopes values which map to sets of related claims are: profile email address phone | serviceREQUIRED | It indicates the itsme® service your application intends to use, e.g. service:TEST_code by replacing \"TEST_code\" with the service code generated during registration. | . | openidREQUIRED | It indicates that your application intends to use the OpenID Connect protocol to verify a user's identity by returning a sub claim which represents a unique identifier for the authenticated user. | . | profileOPTIONAL | Returns claims that represent basic profile information, specifically family_name, given_name, name, gender and birthdate. | . | emailOPTIONAL | Returns the email claim, which contains the user's email address, and email_verified, which is a boolean indicating whether the email address was verified by the user. | . | addressOPTIONAL | Returns the information about the user's postal address. The value of the address member is a JSON structure containing some or all of these members formatted street_address postal_code locality country | . | phoneOPTIONAL | Returns the phone claim, which contains the user's phone number, and phone_number_verified, which is a boolean indicating whether the phone number was verified by the user. | . | . | redirect_uriREQUIRED | It is the URL to which users are redirected once the authentication is complete. It MUST match the value preregistered during the registration and use the HTTPS scheme. http://localhost is only permitted for development purposes, it’s not for use in production.Note : if relevant (in case you have a mobile app) make sure that your redirect URIs support the Universal links and App links mechanism. Functionally, it will allow you to have only one single link that will either open your desktop web application, your mobile app or your mobile site on the User’s device. Universal links and App links are standard web links (http://mydomain.com) that point to both a web page and a piece of content inside an app. When a Universal Link is opened, the app OS checks to see if any installed app is registered for that domain. If so, the app is launched immediately without ever loading the web page. If not, the web URL is loaded into the webbrowser. | . | stateStrongly RECOMMENDED | Specifies any string value that your application uses to maintain state between your Authorization Request and the Authorization Server's response. You can use this parameter for several purposes, such as directing the user to the correct resource in your application and mitigating cross-site request forgery. | . | nonceStrongly RECOMMENDED | A string value used to associate a session with an ID Token, and to mitigate replay attacks. The value is passed through unmodified from the Authentication Request to the ID Token. | . | login_hintOPTIONAL | If your application knows which user is trying to authenticate, it can use this parameter to pre-fill the phone number of the user on the itsme® sign-in page, e.g. 32+123456789 with 32 the country code and 123456789 the user's phone number. | . | ui_localesOPTIONAL | Indicates the user's preferred languages for the itsme® sign-in page, represented as a space-separated list of language tag values, ordered by preference.Possible values : fr nl de en | . | displayOPTIONAL | Specify how the itsme® sign-in page should be displayed to the user. If set to touch, it SHOULD displays the itsme® sign-in page with a device that leverages a touch interface. If set to page, the itsme® sign-in UI SHOULD be consistent with a full page view of the User-Agent. If the display parameter is not specified, this is the default display mode. | . | acr_valuesOPTIONAL | Indicates the authentication method required to process the request, represented as a space-separated list of tag values, ordered by preference.Possible values : http://itsme.services/v2/claim/acr_basic http://itsme.services/v2/claim/acr_advancedNote : If these two values are provided only the most constraining authentication method will be applied, e.g. http://itsme.services/v2/claim/acr_advanced. | http://itsme.services/v2/claim/acr_basic | It lets the user to choose either fingerprint usage (if device is compatible) or itsme® code. If the acr_values parameter is not specified, this is the default authentication method. | . | http://itsme.services/v2/claim/acr_advanced | It forces the user to use his itsme® code. | . | . | claimsOPTIONAL | Requests specific user's details to be returned from the UserInfo Endpoint and/or in the ID Token. It is represented as a JSON object that has two members - {\"userinfo\":{...} and {\"id_token\":{...}, which content indicates which claims to return at the UserInfo Endpoint and which at the ID Token, together with indication whether the claim is voluntary (default) or essential.Possible user's details your application can request is listed below. | nameOPTIONAL | User's full name in displayable form including all name parts, possibly including titles and suffixes | . | given_nameOPTIONAL | Given name(s) or first name(s) of the user. Note that in some cultures, people can have multiple given names; all can be present, with the names being separated by space characters. | . | family_nameOPTIONAL | Surname(s) or last name(s) of the user. Note that in some cultures, people can have multiple family names or no family name; all can be present, with the names being separated by space characters. | . | birtdateOPTIONAL | User's birthday, represented as a YYYY-MM-DD format. | . | http://itsme.services/v2/claim/birthdate_as_stringOPTIONAL | User's birthday, represented as a string. | . | genderOPTIONAL | User's gender. Possible values are : female male | . | emailOPTIONAL | User's email address. | . | email_verifiedOPTIONAL | true if the user's e-mail address is verified; otherwise false. | . | phone_numberOPTIONAL | User's phone number, in E.164 format. | . | phone_number_verifiedOPTIONAL | true if the user's e-phone number is verified; otherwise false. | . | addressOPTIONAL | Returns the information about the user's postal address. The value of the address is a JSON structure containing some or all of these members formatted street_address postal_code locality country. | . | http://itsme.services/v2/claim/claim_citizenshipOPTIONAL | The jurisdiction that has conferred citizenship rights to the user, in ISO 3166 format. | . | http://itsme.services/v2/claim/place_of_birthOPTIONAL | The location where the user was born. The value of this attribute is a JSON structure containing some or all of these members formatted city country. | . | http://itsme.services/v2/claim/physical_person_photoOPTIONAL | XXX | . | http://itsme.services/v2/claim/BEeidSnOPTIONAL | Returns the Belgian ID card number, 12 digits in the form xxx-xxxxxxx-yy. The check-number yy is the remainder of the division of xxxxxxxxxx by 97. | . | http://itsme.services/v2/claim/claim_deviceOPTIONAL | Returns information about the user's phone. The value of this attribute is a JSON structure containing some or all of these members os appName appRelease deviceLabel debugEnabled deviceID osRelease manufacturer deviceLockLevel smsEnabled rooted msisdn deviceModel sdkRelease. | . | http://itsme.services/v2/claim/transaction_infoOPTIONAL | Returns information about the itsme® transaction. The value of this attribute is a JSON structure containing some or all of these members securityLevel bindLevel appRelease. | . | http://itsme.services/v2/claim/BENationalNumberOPTIONAL | Returns the unique identification number of natural persons who are registered in Belgium. This number consists of 11 digits of the form yy.mm.dd-xxx.cd where yy.mm.dd is the birthdate of the person, xxx a sequential number (odd for males and even for females) and cd a check-digit. | . | http://itsme.services/v2/claim/claim_luxtrust_ssnOPTIONAL | Returns an unique identification number of natural persons who are registered via Luxtrust. This number consists of 20 digits. | . | http://itsme.services/v2/claim/claim_nl_bsnOPTIONAL | Returns the citizen service number, a unique registration number for everyone who lives in the Netherlands. This number consists of 8 to 9 digits. | . | . | request_uriOPTIONAL | A URL using the https scheme referencing a resource containing a JWT whose claims are the request parameters. The request_uri parameter is used to secure parameters in the authentication request from tainting or inspection when sending the request to the itsme® Authorization Endpoint.If used, the JWT MUST be signed then encrypted, with the result being a Nested JWT. | . | requestOPTIONAL | It represents the request as a JWT whose Claims are the request parameters. The request parameter is used to secure parameters in the authentication request from tainting or inspection when sending the request to the itsme® Authorization Endpoint.If used, the JWT MUST be signed then encrypted, with the result being a Nested JWT. | . Response . 302 application/json . | code | An intermediate opaque credential used to retrieve the ID Token and Access Token.Note : the code has a lifetime of 3 minutes. | . | state | The string value provided in the Authorization Request. You SHOULD validate that the value returned matches the one supplied. | . | GET https://oidc.[e2e/prd].itsme.services/clientsecret-oidc/csapi/v0.1/connect/authorize . Parameters . | client_idREQUIRED | It identifies your application. This parameter value is generated during registration. | . | response_typeREQUIRED | This defines the processing flow to be used when forming the response. Because itsme® supports the Authorization Code Flow, this value MUST be code. | . | scopeREQUIRED | It allows your application to express the desired scope of the access request. Each scope returns a set of user attributes. The scopes an application should request depend on which user attributes your application needs. Once the user authorizes the requested scopes, his details are returned in an ID Token and are also available through the UserInfo Endpoint.All scope values must be space-separated.The basic (and required) scopes is openid and service. Beyond that, your application can ask for additional standard scopes values which map to sets of related claims : profile email address phone | serviceREQUIRED | It indicates the itsme® service your application intends to use, e.g. service:TEST_code by replacing \"TEST_code\" with the service code generated during registration. | . | openidREQUIRED | It indicates that your application intends to use the OpenID Connect protocol to verify a user's identity by returning a sub claim which represents a unique identifier for the authenticated user. | . | profileOPTIONAL | Returns claims that represent basic profile information, specifically family_name, given_name, name, gender and birthdate. | . | emailOPTIONAL | Returns the email claim, which contains the user's email address, and email_verified, which is a boolean indicating whether the email address was verified by the user. | . | addressOPTIONAL | Returns the information about the user's postal address. The value of the address member is a JSON structure containing some or all of these members formatted street_address postal_code locality country | . | phoneOPTIONAL | Returns the phone claim, which contains the user's phone number, and phone_number_verified, which is a boolean indicating whether the phone number was verified by the user. | . | . | redirect_uriREQUIRED | It is the URL to which users are redirected once the authentication is complete. It MUST match the value preregistered during the registration and use the HTTPS scheme. http://localhost is only permitted for development purposes, it’s not for use in production.Note : if relevant (in case you have a mobile app) make sure that your redirect URIs support the Universal links and App links mechanism. Functionally, it will allow you to have only one single link that will either open your desktop web application, your mobile app or your mobile site on the User’s device. Universal links and App links are standard web links (http://mydomain.com) that point to both a web page and a piece of content inside an app. When a Universal Link is opened, the app OS checks to see if any installed app is registered for that domain. If so, the app is launched immediately without ever loading the web page. If not, the web URL is loaded into the webbrowser. | . | stateStrongly RECOMMENDED | Specifies any string value that your application uses to maintain state between your Authorization Request and the Authorization Server's response. You can use this parameter for several purposes, such as directing the user to the correct resource in your application and mitigating cross-site request forgery. | . | nonceStrongly RECOMMENDED | A string value used to associate a session with an ID Token, and to mitigate replay attacks. The value is passed through unmodified from the Authentication Request to the ID Token. | . | claimsOPTIONAL | Requests specific user's details to be returned from the UserInfo Endpoint and/or in the ID Token. It is represented as a JSON object that has two members - {\"userinfo\":{...} and {\"id_token\":{...}, which content indicates which claims to return at the UserInfo Endpoint and which with the ID Token, together with indication whether the claim is voluntary (default) or essential.Possible user's details your application can request is listed below. | nameOPTIONAL | User's full name in displayable form including all name parts, possibly including titles and suffixes | . | given_nameOPTIONAL | Given name(s) or first name(s) of the user. Note that in some cultures, people can have multiple given names; all can be present, with the names being separated by space characters. | . | family_nameOPTIONAL | Surname(s) or last name(s) of the user. Note that in some cultures, people can have multiple family names or no family name; all can be present, with the names being separated by space characters. | . | birtdateOPTIONAL | User's birthday, represented as a YYYY-MM-DD format. | . | http://itsme.services/v2/claim/birthdate_as_stringOPTIONAL | User's birthday, represented as a string. | . | genderOPTIONAL | User's gender. Possible values are : F M | . | emailOPTIONAL | User's email address. | . | email_verifiedOPTIONAL | true if the user's e-mail address is verified; otherwise false. | . | phone_numberOPTIONAL | User's phone number, in E.164 format. | . | phone_number_verifiedOPTIONAL | true if the user's e-phone number is verified; otherwise false. | . | addressOPTIONAL | Returns the information about the user's postal address. The value of the address is a JSON structure containing some or all of these members formatted street_address postal_code locality country. | . | http://itsme.services/v2/claim/claim_citizenshipOPTIONAL | The jurisdiction that has conferred citizenship rights to the user, in ISO 3166 format. | . | http://itsme.services/v2/claim/place_of_birthOPTIONAL | The location where the user was born. The value of this attribute is a JSON structure containing some or all of these members formatted city country. | . | http://itsme.services/v2/claim/physical_person_photoOPTIONAL | XXX | . | http://itsme.services/v2/claim/BEeidSnOPTIONAL | Returns the Belgian ID card number, 12 digits in the form xxx-xxxxxxx-yy. The check-number yy is the remainder of the division of xxxxxxxxxx by 97. | . | http://itsme.services/v2/claim/claim_deviceOPTIONAL | Returns information about the user's phone. The value of this attribute is a JSON structure containing some or all of these members os appName appRelease deviceLabel debugEnabled deviceID osRelease manufacturer hasSimEnabled deviceLockLevel smsEnabled rooted imei deviceModel sdkRelease. | . | http://itsme.services/v2/claim/transaction_infoOPTIONAL | Returns information about the itsme® transaction. The value of this attribute is a JSON structure containing some or all of these members securityLevel bindLevel appRelease. | . | http://itsme.services/v2/claim/BENationalNumberOPTIONAL | Returns an unique identification number of natural persons who are registered in Belgium. This number consists of 11 digits of the form yy.mm.dd-xxx.cd where yy.mm.dd is the birthdate of the person, xxx a sequential number (odd for males and even for females) and cd a check-digit. | . | http://itsme.services/v2/claim/claim_luxtrust_ssnOPTIONAL | Returns an unique identification number of natural persons who are registered via Luxtrust. This number consists of 20 digits. | . | http://itsme.services/v2/claim/claim_nl_bsnOPTIONAL | Returns the citizen service number, a unique registration number for everyone who lives in the Netherlands. This number consists of 8 to 9 digits. | . | . | request_uriOPTIONAL | A URL using the https scheme referencing a resource containing a JWT whose claims are the request parameters. The request_uri parameter is used to secure parameters in the authentication request from tainting or inspection when sending the request to the itsme® Authorization Endpoint.If used, the JWT MUST be signed. | . Response . 302 application/json . | code | An intermediate opaque credential used to retrieve the ID Token and Access Token.Note : the code has a lifetime of 3 minutes. | . | state | The string value provided in the Authorization Request. You SHOULD validate that the value returned matches the one supplied. | . | . Example . | RSA keys | Symmetric key | . | Request . GET /authorize HTTP/1.1 Host: server.example.com response_type=code &amp;client_id=s6BhdRkqt3 &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb &amp;scope=openid%20service:TEST_code%20profile%20email &amp;nonce=n-0S6_WzA2Mj &amp;state=af0ifjsldkj &amp;acr_values=http://itsme.services/V2/claim/acr_basic . Response . HTTP/1.1 302 Found Location: https://client.example.org/cb? code=SplxlOBeZQQYbYS6WxSbIA &amp;state=af0ifjsldkj . | Request . GET /authorize HTTP/1.1 Host: server.example.com response_type=code &amp;client_id=s6BhdRkqt3 &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb &amp;scope=openid%20service:TEST_code%20profile%20email &amp;nonce=n-0S6_WzA2Mj &amp;state=af0ifjsldkj &amp;acr_values=http://itsme.services/V2/claim/acr_basic . Response . HTTP/1.1 302 Found Location: https://client.example.org/cb? code=SplxlOBeZQQYbYS6WxSbIA &amp;state=af0ifjsldkj . | . ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#authorization-request",
    "relUrl": "/authentication/#authorization-request"
  },"8": {
    "doc": "Authentication API",
    "title": "Token Request",
    "content": ". | RSA keys | Symmetric key | . | POST https://idp.[e2e/prd].itsme.services/v2/token . To assert the identity of the user, the code received previously needs to be exchanged for an ID token and access token. During this step, your application has to authenticate itself to our server using RSA keys. Parameters . | grant_typeREQUIRED | Set this to authorization_code to tell the Token Endpoint that your application wants to exchange an authorization code for an ID koken and access token. | . | codeREQUIRED | The intermediate opaque credential received in the Authorization Response. | . | redirect_uriREQUIRED | It is the URL to which users are redirected once the authentication is complete. It MUST match the value used in the Authorization Request. | . | client_assertion_typeREQUIRED | Specifies the type of assertion. Set this to urn:ietf:params:oauth:client-assertion-type:jwt-bearer. | . | client_assertionREQUIRED | Contains a JWT token that is signed, and then encrypted, using the client RSA keys. This ensures that the request to get the id token and access token is made only from your application, and not from a potential attacker that may have intercepted the authorization code.The JWT contains the following claims. | issREQUIRED | The issuer of the token. This value must be the same as the client_id. | . | subREQUIRED | The subject of the token. This value must be the same as the client_id. | . | audOPTIONAL | The full URL of the resource you're using the JWT to authenticate to. Set this to https://idp.[e2e/prd].itsme.services/v2/token. | . | jtiOPTIONAL | An unique identifier for the token. | . | expOPTIONAL | The expiration time of the token in seconds since January 1, 1970 UTC. | . | . Response . 200 application/json . | access_token | Allows an application to retrieve consented user information from the UserInfo Endpoint. | . | token_type | Provides your application with the information required to successfully utilize the access token. Returned value is Bearer.. | . | id_token | A security token that contains information about the authentication of an user, and potentially other requested claim data's. The id_token value is represented as a signed and encrypted JSON Web Token. So, before being able to use the ID Token claim's you will have to decrypt and verify it using the RSA keys. | . | POST https://oidc.[e2e/prd].itsme.services/clientsecret-oidc/csapi/v0.1/connect/token . To asserts the identity of the user, the code received previously need to be exchanged for an ID token and access token. During this step, your application has to authenticate itself to our server using a symmetric key. Parameters . | grant_typeREQUIRED | Set this to authorization_code to tell the Token Endpoint that your application wants to exchange an authorization code for an ID koken and access token. | . | client_idREQUIRED | It identifies your application. This parameter value is generated during registration. | . | codeREQUIRED | The intermediate opaque credential received in the Authorization Response. | . | redirect_uriREQUIRED | It is the URL to which users are redirected once the authentication is complete. It MUST match the value used in the Authorization Request. | . | client_secretREQUIRED | Contains the a key you reveiced when registering your application. This ensures that the request to get the id token and access token is made only from your application, and not from a potential attacker that may have intercepted the authorization code. | . Response . 200 application/json . | access_token | Allows an application to retrieve consented user information from the UserInfo Endpoint. | . | token_type | Provides your application with the information required to successfully utilize the access token. Returned value is Bearer. | . | id_token | A security token that contains information about the authentication of an user, and potentially other requested claim data's. The id_token value is represented as a signed JSON Web Token. So, before being able to use the ID Token claim's you will have to verify it using the symmetric key. | . | . Example . | RSA keys | Symmetric key | . | Request . POST /token HTTP/1.1 Host: openid.c2id.com Content-Type: application/x-www-form-urlencoded grant_type=authorization_code &amp;code=SplxlOBeZQQYbYS6WxSbIA &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb &amp;client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer &amp;client_assertion=PHNhbWxwOl ... ZT . Response . HTTP/1.1 200 OK Content-Type: application/json Cache-Control: no-store Pragma: no-cache { \"id_token\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5 NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4 XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg\" \"access_token\": \"SlAV32hkKG\", \"token_type\": \"Bearer\", \"expires_in\": 3600, } . | Request . POST /token HTTP/1.1 Host: openid.c2id.com Content-Type: application/x-www-form-urlencoded grant_type=authorization_code &amp;code=SplxlOBeZQQYbYS6WxSbIA &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb &amp;client_id=s6BhdRkqt3 &amp;client_secret=PHNhbWxwOl ... ZT . Response . HTTP/1.1 200 OK Content-Type: application/json Cache-Control: no-store Pragma: no-cache { \"id_token\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5 NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4 XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg\" \"access_token\": \"SlAV32hkKG\", \"token_type\": \"Bearer\", \"expires_in\": 3600, } . | . ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#token-request",
    "relUrl": "/authentication/#token-request"
  },"9": {
    "doc": "Authentication API",
    "title": "UserInfo Request",
    "content": ". | RSA keys | Symmetric key | . | GET https://idp.[e2e/prd].itsme.services/v2/userinfo . The UserInfo Endpoint returns previously consented user profile information to your application. In other words, if the required claims are not returned in the ID Token, you can obtain the additional claims by presenting the access token to the itsme® UserInfo Endpoint. This is achieved by sending a HTTP GET request to the Userinfo Endpoint, passing the access token value in the Authorization header using the Bearer authentication scheme. This is illustrated in the example below. Response . The UserInfo Response is a signed and encrypted JSON Web Token. So, before being able to extract the claims you will have to decrypt and verify it using the RSA keys. | GET https://oidc.[e2e/prd].itsme.services/clientsecret-oidc/csapi/v0.1/connect/userinfo . The UserInfo Endpoint returns previously consented user profile information to your application. In other words, if the required claims are not returned in the ID Token, you can obtain the additional claims by presenting the access token to the itsme® UserInfo Endpoint. This is achieved by sending a HTTP GET request to the Userinfo Endpoint, passing the access token value in the Authorization header using the Bearer authentication scheme. This is illustrated in the example below. Response . The UserInfo Response is a signed JSON Web Token. So, before being able to extract the claims you will have to verify it using the symmetric key. | . Example . | RSA keys | Symmetric key | . | Request . GET /userinfo HTTP/1.1 Host: server.example.com Authorization: Bearer SlAV32hkKG . Response . HTTP/1.1 200 OK Content-Type: application/json { \"sub\": \"248289761001\", \"name\": \"Jane Doe\", \"given_name\": \"Jane\", \"family_name\": \"Doe\", \"preferred_username\": \"j.doe\", \"email\": \"janedoe@example.com\", \"picture\": \"http://example.com/janedoe/me.jpg\" } . | Request . GET /userinfo HTTP/1.1 Host: server.example.com Authorization: Bearer SlAV32hkKG . Response . HTTP/1.1 200 OK Content-Type: application/json { \"sub\": \"248289761001\", \"name\": \"Jane Doe\", \"given_name\": \"Jane\", \"family_name\": \"Doe\", \"preferred_username\": \"j.doe\", \"email\": \"janedoe@example.com\", \"picture\": \"http://example.com/janedoe/me.jpg\" } . | . ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#userinfo-request",
    "relUrl": "/authentication/#userinfo-request"
  },"10": {
    "doc": "Authentication API",
    "title": "Revoke Request",
    "content": ". | RSA keys | Symmetric keys | . | Not applicable. | POST https://oidc.[e2e/prd].itsme.services/clientsecret-oidc/csapi/v0.1/connect/revoke . The Revocation Endpoint enables your application to notify itsme® that a previously obtained access token is no longer needed and MUST be revoked. ### Parameters . | client_idREQUIRED | It identifies your application. This parameter value is generated during registration. | . | client_secretREQUIRED | Contains the a key you reveiced when registering your application. | . | tokenREQUIRED | The access_token previously obtained that you want to revoke. | . | token_type_hintOPTIONAL | If used, this is set to access_token because itsme® API don't support refresh tokens. | . Response . The response is very simple: it’s always an HTTP 200 if the token is revoked or unknown. | . Example . | RSA keys | Symmetric key | . | Not applicable. | Request . Response . | . ",
    "url": "https://belgianmobileid.github.io/doc/authentication/#revoke-request",
    "relUrl": "/authentication/#revoke-request"
  },"11": {
    "doc": "Authentication API",
    "title": "Authentication API",
    "content": " ",
    "url": "https://belgianmobileid.github.io/doc/authentication/",
    "relUrl": "/authentication/"
  },"12": {
    "doc": "Confirmation",
    "title": "1. Introduction",
    "content": "itsme® is a trusted identity provider allowing partners to use verified identities for authentication and authorization on web desktop, mobile web or mobile applications. The objective of this document is to provide all the information needed to integrate the Confirmation service using the OpenID Connect Core 1.0 specifications. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#1-introduction",
    "relUrl": "/confirmation/#1-introduction"
  },"13": {
    "doc": "Confirmation",
    "title": "2. Prerequisite",
    "content": "Before you start integrating itsme®, you MUST create an organisation on the following url: https://docs.google.com/forms/d/e/1FAIpQLSdyfhKiiehNg4DhFzhQeHaj9EG2VeFoyPNVaI-TSwnG5WlFfw/viewform. Once there, you will need to fill out a basic form with the following questions: . | Contact details such as your email, name, phone number. | Organisation details as shown on the company register for your jurisdiction. | Information about the project you want to set-up and the use case you have in mind. | itsme® terms and conditions. If you require a copy of this please contact onboarding@itsme.be. | . Our onboarding team will review your project and get in touch within 3 days with a “client_id” and a “service_code” which need to be added in your configuration. Meanwhile, this should not prevent you from starting your integration. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#2-prerequisite",
    "relUrl": "/confirmation/#2-prerequisite"
  },"14": {
    "doc": "Confirmation",
    "title": "3. Integration guide",
    "content": "Our itsme® app can be seamlessly be integrated with your web desktop, mobile web or mobile application so you can perform secure identity checks. Technical overview . itsme® integration is based on the Authorization Code Flow of OpenID Connect 1.0. The Authorization Code Flow goes through the steps as defined in OpenID Connect Core Authorization Code Flow Steps, depicted in the following diagram: . OpenID Connect provides certified libraries, products, and tools which could help you integrating the itsme® service. For more information, please visit the official webpage: https://openid.net/developers/libraries/. How it works . | The User indicates on your end he wishes to authenticate with itsme® | Your web desktop, mobile web or mobile application (aka 'Relying Party' in the OpenID Connect specification) sends a request to itsme® (aka 'OpenID Provider' in the OpenID Connect specification) to authenticate the User. This request will redirect the User to the itsme® Front-End. itsme® then authenticates the User by asking him . | to enter his phone number on the itsme® OpenID web page | authorize the release of some information’s to your application | to provide his credentials (itsme® code or fingerprint or FaceID) | . If you are building a mobile web or mobile application, the User don’t need to enter his mobile phone number on the itsme® OpenID web page, he will be automatically redirected to the itsme app via the Universal links or App links mechanism. | Once the User has authorized the request and has been authenticated, itsme® will return an Authorization Code to the Service Provider Front-End, redirecting the user to your mobile or web application. | The Service Provider Back-End calls the itsme® Token Endpoint and exchanges the Authorization Code for an ID Token identifying the User and an Access Token. | The Service Provider Back-End MAY request the additional User information from the itsme® userInfo Endpoint by presenting the Access Token obtained in the previous step. | At this stage you are able to confirm the success of the operation and display a success message. | . If a user doesn’t have the itsme® app, they’ll be redirected to a mobile website with more information and download links. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#3-integration-guide",
    "relUrl": "/confirmation/#3-integration-guide"
  },"15": {
    "doc": "Confirmation",
    "title": "3.1. Check itsme® OpenID Provider configuration",
    "content": "To simplify implementations and increase flexibility, OpenID Connect allows the use of a Discovery Document, a JSON document containing key-value pairs which provide details about itsme® configuration, such as the URIs of the . | Authorization, Token and userInfo Endpoints | supported claims | JWKSet URL | ... | . The Discovery document for itsme® can be retrieved from: . | Environment | URL | . | SANDBOX | https://idp.e2e.itsme.services/v2/.well-known/openid-configuration | . | PRODUCTION | https://idp.prd.itsme.services/v2/.well-known/openid-configuration | . ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#31-check-itsme-openid-provider-configuration",
    "relUrl": "/confirmation/#31-check-itsme-openid-provider-configuration"
  },"16": {
    "doc": "Confirmation",
    "title": "3.2. Create a itsme® button on your application",
    "content": "First, you will need to create a button to allow your users to authenticate with itsme®. See the Button design guide before you start the integration. Upon clicking this button, we will open a modal view which contains a field that need to be filled by the end user with it’s phone number. Note that mobile web users will skip the phone number step, as they use the itsme® mobile app directly to authenticate. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#32-create-a-itsme-button-on-your-application",
    "relUrl": "/confirmation/#32-create-a-itsme-button-on-your-application"
  },"17": {
    "doc": "Confirmation",
    "title": "3.3. Crafting your client authentication method",
    "content": "Some itsme® endpoints require client authentication in order to protect entitlement information between interested parties. The OpenID Connect Core specifications support multiple authentication methods, but itsme® only supports “private_key_jwt” : it requires that each party exposes its public keys as a simple JWK Set document on a URI accessible to all, and keep its private set for itself. For itsme®, this URI can be retrieved from the itsme® Discovery document, using the “jwks_uri” key. Your private and public keys can be generated via Yeoman. To get started, install Yeoman and generator-itsme with NPM: . &lt;code style=display:block;white-space:pre-wrap&gt;$ npm install -g yo generator-itsme&lt;/code&gt; . After installation, run the generator: . &lt;code style=display:block;white-space:pre-wrap&gt;$ yo itsme&lt;/code&gt; . Don't forget to send your JWK Set URI by email to onboarding@itsme.be and we’ll make sure to complete the configuration for you in no time! . ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#33-crafting-your-client-authentication-method",
    "relUrl": "/confirmation/#33-crafting-your-client-authentication-method"
  },"18": {
    "doc": "Confirmation",
    "title": "3.4. Build an Authentication Request and request attributes",
    "content": "Composing your base URL . First, you will forg a HTTPS GET request that MUST be sent to the itsme® Authorization Endpoint. The itsme® Authorization Endpoint can be retrieved from the itsme® Discovery document, using the key “authorization_endpoint”. By opposition to the OpenID Connect specifications, POST method is not authorized when triggering the itsme® App through the Universal/App Link mechanism only support the HTTP GET method on the Authorisation Endpoint. More information about Universal links and App links can be found in the section 3.3. The OpenID Connect Core specification defines a number of parameters to integrate in the HTTPS GET query string : . | Parameter | Required | Description | . | client_id | Required | This is the client ID you received after sharing your organisation details with us. | . | response_type | Required | This defines the processing flow to be used when forming the response. Because itsme® uses the Authorization Code Flow as described above, this value MUST be “code”. | . | scope | Required | The scope parameter allows the application to express the desired scope of the access request. It MUST contain the value “openid” and “service:TEST_code”, by replacing “TEST_code” with the service code you received when registering your project in the itsme® B2B portal.You MAY also specify additional scopes, separated by spaces, to request more information about the User. See the list below for more information.&lt;/br&gt;An HTTP ERROR “not_implemented” will be returned if the required values are not specified.&lt;/br&gt;Unrecognised values will be ignored.&lt;/br&gt; | . | redirect_uri | Required | This is the URI to which the authentication response will be sent. The Redirection URI MUST use the “https” scheme. The Redirection URI MAY NOT use the “http” or an alternate scheme, such as one that is intended to identify a callback into a native application.&lt;/br&gt;Note : &lt;ul&gt;&lt;li&gt;this URI MUST be whitelisted in our systems. So, don’t forget to send your it by email to onboarding@itsme.be and we’ll make sure to complete the configuration for you in no time!&lt;/li&gt;&lt;li&gt;Regardless of the application you are building you should make sure that your redirect URIs support the Universal links and App links mechanism. Functionally, it will allow you to have only one single link that will either open your desktop web application, your mobile app or your mobile site on the User’s device. Universal links and App links are standard web links (http://mydomain.com) that point to both a web page and a piece of content inside an app. When a Universal Link is opened, the app OS checks to see if any installed app is registered for that domain. If so, the app is launched immediately without ever loading the web page. If not, the web URL is loaded into the webbrowser. The specifications for the implementation of Universal links and App links can be found in the Appendix.&lt;/li&gt;&lt;/ul&gt; | . | state | Strongly RECOMMENDED | An opaque value used in the Authentication Request, which will be returned unchanged in the Authorization Code. This parameter SHOULD be used for preventing cross-site request forgery (XRSF). When deciding how to implement this, one suggestion is to use a private key together with some easily verifiable variables, for example, your client ID and a session cookie, to compute a hashed value. This will result in a byte value that will be infeasibility difficult to guess without the private key. After computing such an HMAC, base-64 encode it and pass it to the Authorization Server as “state” parameter. Another suggestion is to hash the current date and time. This requires your application to save the time of transmission in order to verify it or to allow a sliding period of validity.&lt;/br&gt; | . | nonce | Strongly RECOMMENDED | A string value used to associate a session with an ID Token, and to mitigate replay attacks. The value is passed through unmodified from the Authentication Request to the ID Token. Sufficient entropy MUST be present in the “nonce” values used to prevent attackers from guessing values. See OpenID Connect Core specifications for more information. | . | login_hint | Optional | Can be used to pre-fill the phone number field on the itsme® OpenID web page for the User, if your application knows ahead of time which User is trying to authenticate. If provided, this value MUST be a phone number in the format specified for the “phone_number” claim: “+\"&lt;/i&gt;. E.g. \"login_hint=32+123456789\".&lt;/br&gt;\"login_hint\" with invalid syntax will be ignored.&lt;/br&gt; . | . | display | Optional | ASCII string value that specifies how the Authorization Server displays the authentication and consent User interface pages to the User. MUST be “page” if provided.Other values will yield an HTTP ERROR “not_implemented”.&lt;/br&gt; | . | prompt | Optional | Space delimited, case sensitive list of ASCII string values that specifies whether the Authorization Server prompts the User for reauthentication and consent. MUST be “consent” if provided. | . | ui_locales | Optional | User’s preferred languages and scripts for the User interface (e.g.: OpenID web page). Supported values are: “fr”, “nl”, “en” and “de”. Any other value will be ignored. | . | acr_values | Optional | Space-separated string that specifies the acr values that the Authorization Server is being requested to use for processing this Authentication Request, with the values appearing in order of preference.2 values are supported:&lt;ul&gt;&lt;li&gt;Basic level - let the User to choose either fingerprint usage (if device is compatible) or PIN“http://itsme.services/v2/claim/acr_basic”&lt;/br&gt;&lt;/li&gt;&lt;li&gt;Advanced level - force the User to use PIN“http://itsme.services/v2/claim/acr_advanced”&lt;/br&gt;&lt;/li&gt;&lt;/ul&gt;When multiple values are provided only the most constraining will be used (advanced &gt; basic). If not provided basic level will be used.&lt;/br&gt; | . | max_age | Not supported | Any supplied value will be ignored.As itsme® does not maintain a session mechanism, an active authentication is always required.&lt;/br&gt; | . | response_mode | Not supported | Any supplied value will be ignored. | . | id_token_hint | Not supported | Any supplied value will be ignored. | . | claims_locales | Not supported | Any supplied value will be ignored. | . | registration | Not supported | Any supplied value will be ignored. | . | claims | Optional | This parameter is used to request specific claims. The value is a JSON object listing the requested claims. See the list below for more information.&lt;/br&gt; | . | request_uri | Optional | This parameter enables OpenID Connect parameters to be passed by reference. The “request_uri” value is a URL using the https scheme referencing a resource containing a Request Object value, which is a JWT containing the request parameters. When the “request_uri” parameter is used, the OpenID Connect request parameter values contained in the referenced JWT supersede those passed using the OAuth 2.0 request syntax.&lt;/br&gt;The following validations should be done when using the “request_uri” parameter:&lt;/br&gt;&lt;ul&gt;&lt;li&gt;The values for the “response_type” and “client_id” parameters MUST be filled in the Authentication Request, since they are REQUIRED in the OpenID Connect Core specifications. The values for these parameters MUST match those in the Request Object, if present.&lt;/li&gt;&lt;li&gt;Even if a “scope” parameter is present in the Request Object value, a “scope” parameter – containing the “openid” scope value to indicate to the underlying OpenID Connect Core logic that this is an OpenID Connect request – MUST always be passed in the Authentication Request.&lt;/li&gt;&lt;li&gt;The Request Object MUST be MUST be signed then encrypted, with the result being a Nested JWT, as defined in the JSON Web Token (JWT) section. As the Request Object is a nested JWT, it MUST contain the claims “iss” (issuer) and “aud” (audience) as members. The “iss” value MUST be your Client ID. The “aud” value MUST be the value corresponding to the key “authorization_endpoint” in the itsme® Discovery document.&lt;/li&gt;&gt;&lt;li&gt;You need to store the Request Object resource remotely at a URL the the Authorization Server can access. This URL is the Request URI, “request_uri”. Usage of ‘localhost’ is not permitted.&lt;li&gt;The Request URI MUST contain the port 443 as in this example: https://test.istme.be:443/p/test.&lt;/li&gt;&lt;li&gt;The Request URI value is a URL using the https scheme.&lt;/li&gt;&lt;/ul&gt;Don’t forget to send share this URI by email to onboarding@itsme.be and we’ll make sure to complete the configuration for you in no time!&lt;/br&gt;If the “request” parameters is used, this parameter MUST NOT be used in the same request.&lt;/br&gt; | . | request | Optional | If the “request_uri” parameters is used, this parameter MUST NOT be used in the same request.&lt;/br&gt; | . When implementing the Identification service, following rule apply : you MUST at least specify one User claim in the \"scope\" parameter or use the \"claims\" parameter. The following is a non-normative example of a request that would be sent to the Authorization Server : . &lt;code style=display:block;white-space:pre-wrap&gt; GET ${baseUrl}/v2/authorization &amp;response_type=code &amp;client_id=MY_PARTNER_CODE &amp;scope=openid service:TEST_code profile email &amp;redirect_uri=https://test.istme.be &amp;request_uri=https://test.istme.be:443/p/test &amp;acr_values=http://itsme.services/V2/claim/acr_basic &amp;nonce=A_VALID_NONCE&lt;/br&gt; With some parameters passed as a JWT in the “request_uri”, before base64url encoding, signing and encrypting :&lt;/br&gt; { “response_type”:”code”, “client_id”:”MY_PARTNER_CODE”, “scope”: “openid service:TEST_code profile email”, “redirect_uri”: “https://test.istme.be”, “state”:”A_VALID_STATE”, “aud”: “${baseUrl}/v2/authorization”, “iss”:”MY_PARTNER_CODE”, “claims”:{ “userinfo”:{ “http://itsme.services/V2/claim/BEeidSN”:null, “http://itsme.services/v2/claim/place_of_birth”:null } } }&lt;/br&gt; &lt;/code&gt; . Requesting claims about the User and the Authentication event . The OpenID Connect Core specification defines a sets of claims that MAY be requested via the “scope” and/or “claims” request parameter. As itsme® manage multiple international ID Templates - each with his own set of User Data - it can be that you will not receive some information about a User even if you requested the claim it in the Authorisation Request. Below, you will find the list of claims that MAY be requested via the “scope” request parameter : . | Value | Returned claim | Remarks | Example | . | profile | family_name |   | Smith | . |   | given_name | For BE citizen, we do share the two complete first names and the intimal of the third name if any.&lt;/br&gt;For other ID templates this might differ. | John Matthew A | . |   | name |   | John Matthew A Smith | . |   | gender |   | male | . |   | birthdate |   | 1959-06-03 | . | email | email | Rule for email validity are the following: [a-zA-Z0-9][-_\\w.+]{0,30}@([-\\w+]{1,30}[.]){1,4}[a-zA-Z]{2,12}&lt;/br&gt;Max length: 255 | john.smith@company.lu | . |   | email_verified |   | false | . | phone | phone_number | This attribute is stored as an object with 2 fields in our database: &lt;ul&gt;&lt;li&gt;mobilePhone/phoneNumber = format should be the “international format” without the country code and leading 0&lt;/li&gt;&lt;li&gt;mobilePhone/countryCode = [0-9]{2-3}&lt;/li&gt;&lt;/ul&gt; | +32 495162995 | . |   | phone_number_verified | Supported values are “true” or “false”.But, it is always “true” as we perform a SMS OTP verification during the enrollment. | true | . | address | formatted |   | Place Victor Horta 79, 1348 Louvain-la-Neuve BE | . |   | street_address |   | Place Victor Horta 79 | . |   | postal_code |   | 1348 | . |   | locality |   | Louvain-la-Neuve | . |   | country |   | BE | . Typically, the values returned via the “scope” parameter only contain claims about the identity of the User. Via the “claims” parameter you MAY request the same claims as in the ones available via the “scope” request parameter, as well as information about the specific ID documents, the device and the app version used by the user. These claims are specified below : . | Value | Returned claim | Remarks | Example | . | name | name |   | John Matthew A Smith | . | given_name | given_name | For BE citizen, we do share the two complete first names and the intimal of the third name if any.&lt;/br&gt;For other ID templates this might differ. | John Matthew A | . | family_name | family_name |   | Smith | . | birthdate | birthdate |   | 1959-06-03 | . | http://itsme.services/v2/ claim/birthdate_as_string | http://itsme.services/v2/ claim/birthdate_as_string |   | 10 MAY 1988 | . | gender | gender |   | male | . | email | email | Rule for email validity are the following: [a-zA-Z0-9][-_\\w.+]{0,30}@([-\\w+]{1,30}[.]){1,4}[a-zA-Z]{2,12}&lt;/br&gt;Max length: 255 | john.smith@company.lu | . | email_verified | email_verified |   | false | . | phone_number | phone_number | This attribute is stored as an object with 2 fields in our database: &lt;ul&gt;&lt;li&gt;mobilePhone/phoneNumber = format should be the “international format” without the country code and leading 0&lt;/li&gt;&lt;li&gt;mobilePhone/countryCode = [0-9]{2-3}&lt;/li&gt;&lt;/ul&gt; | +32 428656565 | . | phone_number_verified | phone_number_verifie | Supported values are “true” or “false”.But, it is always “true” as we perform a SMS OTP verification during the enrollment. | true | . | address | formatted |   | Place Victor Horta 79, 1348 Louvain-la-Neuve BE | . |   | street_address |   | Place Victor Horta 79 | . |   | postal_code |   | 1348 | . |   | locality |   | Louvain-la-Neuve | . |   | country |   | BE | . | http://itsme.services/v2/ claim/claim_citizenship | http://itsme.services/v2/ claim/claim_citizenship |   | Belg | . | http://itsme.services/v2/ claim/place_of_birth | formatted |   | bruxelles Belgium | . |   | city |   | bruxelles | . |   | country |   | BE | . | http://itsme.services/v2/ claim/physical_person_photo | http://itsme.services/v2/ claim/physical_person_photo |   | /9j/4AA[…]n | . | http://itsme.services/v2/ claim/BEeidSn | http://itsme.services/v2/ claim/BEeidSn | 12 digits in the form xxx-xxxxxxx-yy. The check-number yy is the remainder of the division of xxxxxxxxxx by 97 | xxx-xxxxxxx-yy | . | http://itsme.services/v2/ claim/BENationalNumber | http://itsme.services/v2/ claim/BENationalNumber | The value has 11 digits. | 88041827591 | . | http://itsme.services/v2/ claim/claim_luxtrust_ssn | http://itsme.services/v2/ claim/claim_luxtrust_ssn |   | 12345678901234567890 | . | http://itsme.services/v2/ claim/claim_device | os |   |   | . |   | appName |   |   | . |   | appRelease |   |   | . |   | deviceLabel |   |   | . |   | debugEnabled |   |   | . |   | deviceID |   |   | . |   | osRelease |   |   | . |   | manufacturer |   |   | . |   | hasSimEnabled |   |   | . |   | deviceLockLevel |   |   | . |   | smsEnabled |   |   | . |   | rooted |   |   | . |   | imei |   |   | . |   | deviceModel |   |   | . |   | sdkRelease |   |   | . | http://itsme.services/v2/ claim/transaction_info | securityLevel | It tells you whether or not the SIM was successfully contacted during the transaction. The returned values could be “SOFT_ONLY”, “SIM_ONLY” or “SIM_AND_SOFT”.No value is returned for the moment&lt;/br&gt;. |   | . |   | bindLevel | It tells you if the User account is bound to a SIM card or not, at the time the transaction occurred. The returned values could be “SOFT_ONLY”, “SIM_ONLY” or “SIM_AND_SOFT”. No value is returned for the moment&lt;/br&gt;. |   | . |   | appRelease | The Mobile Country Code. The returned value is an Integer (three digits) representing the mobile network country. itsme(r) does not possess this information for every account. No value is returned for the moment&lt;/br&gt;. |   | . ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#34-build-an-authentication-request-and-request-attributes",
    "relUrl": "/confirmation/#34-build-an-authentication-request-and-request-attributes"
  },"19": {
    "doc": "Confirmation",
    "title": "3.5. Capturing an Authorization Code",
    "content": "Capturing a successful Authorization Code . If the User is successfully authenticated and authorizes access to the data requested, itsme® will return an Authorization Code to your server component. This is achieved by returning an Authentication Response, which is a HTTP 302 redirect request to the “redirect_uri” specified previously in the Authentication Request. The following is a non-normative example of a successful Authentication Response: . &lt;code style=display:block;white-space:pre-wrap&gt;HTTP/1.1 302 Found Location: https://client.example.org/cb? code=SplxlOBeZQQYbYS6WxSbIA&amp; state=af0ifjsldkj&lt;/code&gt; . The response will contain: . | Values | Returned | Description | . | code | Always | The “code” parameter holds the Authorization Code which is a string value. The content of Authorization Code is opaque for you. This code has a lifetime of 3 minutes. | . | state | If requested | The “state” parameter will be returned if you provided a value in the Authentication Request. You should validate that the value returned matches the one supplied in the Authentication Request. The state value can additionally be used to mitigate against XSRF attacks by cryptographically binding the value of this parameter with a browser cookie.If a wrong/unknown “state” is received, you should take it into account and refuse the related “code” or from a security detection/prevention point of view, monitor if it is a recurring pattern or not.&lt;/br&gt; | . Handling Authentication Error Response . If the request fails due to a missing, invalid, or mismatching redirection URI, or if the client identifier is missing or invalid, the Authorization Server SHOULD inform the User of the error and MUST NOT automatically redirect him to the invalid redirection URI. If the User denies the Authentication Request or if the request fails for reasons other than a missing or invalid redirection URI, itsme® will return an error response to your application. As for a successful response this is achieved by returning a HTTPS 302 redirect request to the redirection_uri specified in the Authentication Request. The error response parameters are the following: . | Values | Returned | Description | . | error | Always | Error type. | . | error_description | Optional | Indicating the nature of the error. | . | state | If requested | Set to the value defined in the Authorisation Request, if any. | . The following is a non-normative example of an error response: . &lt;code style=display:block;white-space:pre-wrap&gt;HTTP/1.1 302 Found Location: https://client.example.org/cb? error=invalid_request &amp;error_description=Unsupported%20response_type%20value &amp;state=af0ifjsldkj&lt;/code&gt; . The following table describes the various error codes that can be returned in the “error” parameter of the error response: . | Error | Description | . | interaction_required | The Authorization Server requires User interaction of some form to proceed. | . | invalid_request_object | The “request” parameter contains an invalid Request Object. | . | registration_not_supported | This error is returned because itsme® does not support use of the “registration” parameter. | . All other HTTPS errors unrelated to OpenID Connect Core will be returned to the User using the appropriate HTTPS status code. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#35-capturing-an-authorization-code",
    "relUrl": "/confirmation/#35-capturing-an-authorization-code"
  },"20": {
    "doc": "Confirmation",
    "title": "3.6. Exchanging the Authorization Code",
    "content": ". Once your server component has received an Authorization Code, your server can exchange it for an Access Token and an ID Token. You might also read in the OpenID Connect Core specification about the Refresh Token, but we don't support them (we don't implement any session mechanism). Your server makes this exchange by sending an HTTPS POST request to the itsme® Token Endpoint URI. This URI can be retrieved from the itsme® Discovery document, using the key “token_endpoint”. An Authorization Code can only be exchanged once. Attempting to re-exchange a code will generate a bad request response, outlined below in the section Handling token error response. The request MUST include the following parameters in the POST body: . | Parameter | Required | Description | . | grant_type | Required | This MUST be set to “authorization_code”. | . | code | Required | The Authorization Code received in response to the Authentication Request. | . | redirect_uri | Required | The redirection URI supplied in the original Authentication Request. This is the URL to which you want the User to be redirected after the authorization is complete. | . | client_assertion | Required | To ensure that the request is genuine and that the tokens are not returned to a third party, you will be authenticated when making the Token Request.The OpenID Connect Core specifications support multiple authentication methods, but itsme® only supports “private_key_jwt”. The JWT Payload in the “client_assertion” parameter MUST be signed then encrypted, with the result being a Nested JWT, as defined in the JSON Web Token (JWT) section.&lt;/br&gt;See the JOSE specifications for more information.&lt;/br&gt; | . | client_assertion_type | Required | This MUST be set to “urn:ietf:params:oauth:client-assertion-type:jwt-bearer”. | . The following is a non-normative example of a request to obtain an ID Token and Access Token: . &lt;code style=display:block;white-space:pre-wrap&gt;POST /token HTTP/1.1 Host: server.example.com Content-Type: application/x-www-form-urlencoded grant_type=authorization_code &amp;code=i1WsRn1uB1 &amp;redirect_uri=https://test.istme.be &amp;client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer &amp;client_assertion=PHNhbWxwOl … ZT&lt;/code&gt; . According to the “private_key_jwt” client authentication method, the “client_assertion” contains the following parameters in the JWT Payload: . | Parameter | Required | Description | . | iss | Required | The issuer of the “private_key_jwt”. This MUST contain the “client_id”. This is the client identifier you received after sharing your organisation details with us.. | . | sub | Required | The subject of the “private_key_jwt”. This MUST contain the “client_id”. This is the client identifier you received after sharing your organisation details with us.. | . | aud | Required | Value that identifies the Authorization Server as an intended audience. This MUST be the itsme® Token Endpoint URL: “https://idp.prd.itsme.services/v2/token”. | . | jti | Required | The “jti” (JWT ID) claim provides a unique identifier for the JWT. The identifier value MUST be assigned by the you in a manner that ensures that there is a negligible probability that the same value will be accidentally assigned to a different data object; if the application uses multiple issuers, collisions MUST be prevented among values produced by different issuers as well. The “jti” claim can be used to prevent the JWT from being replayed. The “jti” value is a case-sensitive string. | . | exp | Required | The “exp” (expiration time) claim identifies the expiration time on or after which the JWT MUST NOT be accepted for processing. The processing of the “exp” claim requires that the current date/time MUST be before the expiration date/time listed in the “exp” claim. Implementers MAY provide for some small leeway, usually no more than a few minutes, to account for clock skew. Its value is a JSON number representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC until the date/time. | . ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#36-exchanging-the-authorization-code",
    "relUrl": "/confirmation/#36-exchanging-the-authorization-code"
  },"21": {
    "doc": "Confirmation",
    "title": "3.7. Managing Token Response",
    "content": "Extracting a successful Token Response . If the Token Request has been sucessfully validated we will return an HTTP 200 OK response including ID and Access Tokens as in the example below: . &lt;code style=display:block;white-space:pre-wrap&gt;HTTP/1.1 200 OK Content-Type: application/json Cache-Control: no-store Pragma: no-cache { “access_token”: “SlAV32hkKG”, “token_type”: “Bearer”, “expires_in”: 3600, “id_token”: “eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5 NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4 XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg” }&lt;/code&gt; . The response body will include the following values: . | Values | Returned | Description | . | access_token | Always | The Access Token which may be used to access the userInfo Endpoint. | . | token_type | Always | Set to “Bearer”. | . | id_token | Always | The ID Token is a JSON Web Token (JWT) that contains User profile information (like the User’s name, email, and so forth), represented in the form of claims. | . | at_hash | Not supported | itsme® does not provide any value for this parameter. | . | refresh_token | Not supported | itsme® does not provide any value for this parameter as it only maintains short-lived session to enforce re-authentication. | . With the following values returned in the “id_token”: . | Values | Returned | Description | . | iss | Always | Identifier of the issuer of the ID Token. | . | sub | Always | An identifier for the User, unique among all itsme® accounts and never reused. Use “sub” in the application as the unique-identifier key for the User. It has 36 characters. | . | aud | Always | Audience of the ID Token. This will contain the “client_id”. This is the client identifier (e.g. : Project ID) you received when registering your project in the itsme® B2B portal. | . | exp | Always | Expiration time on or after which the ID Token MUST NOT be accepted for processing. | . | iat | Always | The time the ID Token was issued, represented in Unix time (integer seconds). | . | auth_time | Always | The time the User authentication occurred, represented in Unix time (integer seconds). | . | nonce | If requested | String value used to associate a session with an ID Token, and to mitigate replay attacks. The value is passed through unmodified from the Authentication Request to the ID Token. Sufficient entropy MUST be present in the “nonce” values used to prevent attackers from guessing values. See the OpenID Connect Core specifications for more information. | . | acr | If requested | Could be “http://itsme.services/V2/claim/acr_basic” or “http://itsme.services/V2/claim/acr_advanced” depending on the value entered in the “acr_values” Authorisation Request parameter. If no value is provided in the “acr_values” parameter, the “acr” will contain “http://itsme.services/V2/claim/acr_basic”. | . | amr | Never |   | . | azp | Never |   | . However, before being able to store and use the returned values from “id_token”, you will first need to validate it by following the the ID Token validation rules described in the section below. ID Token validation . You MUST validate the ID Token in the Token Response in the following manner: . | As the ID Token is a Nested JWT object, you will have to decrypt and verify it using the keys and algorithms that you specified when registering your project in the itsme® B2B portal. The process of decryption and signature validation is described in on.If the ID Token is not encrypted, you SHOULD reject it.&lt;/br&gt; | The Issuer identifier for itsme® (which is obtained by using the key \"issuer\" in the itsme® Discovery document) MUST exactly match the value of the \"iss\" claim. | You MUST validate that the \"aud\" claim contains your \"client_id\" value registered in the itsme® B2B portal. The ID Token MUST be rejected if the ID Token does not list the \"client_id\" as a valid audience. | The current time MUST be before the time represented by the \"exp\" claim. | . If all the above verifications are successful, you can use the subject (“sub”) of the ID Token as the unique identifier of the corresponding User. Handling token error response . If the Token Request is invalid or unauthorized an HTTP 400 response will be returned as in the example: . &lt;code style=display:block;white-space:pre-wrap&gt;HTTP/1.1 400 Bad Request Content-Type: application/json Cache-Control: no-store Pragma: no-cache { “error”: “invalid_request” }&lt;/code&gt; . The response will contain an error parameter and optionally “error_description” parameter. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#37-managing-token-response",
    "relUrl": "/confirmation/#37-managing-token-response"
  },"22": {
    "doc": "Confirmation",
    "title": "3.8. Retrieving User attributes or device/transaction specific claims",
    "content": "Creating the userInfo Request . OpenID Connect Core specifications also allow your application to obtain basic profile information about a specific User in a interoperable way. This is achieved by sending a HTTPS GET request to the itsme® userInfo Endpoint, passing the Access Token value in the Authorization header using the Bearer authentication scheme. The itsme userInfo Endpoint URI can be retrieved from the itsme® Discovery document, using the key “userinfo_endpoint”. &lt;code style=display:block;white-space:pre-wrap&gt;GET https://idp.prd.itsme.services/v2/userinfo HTTP/1.1 Authorization: Bearer &lt;/code&gt; . Managing the userInfo Response . The itsme® userInfo Endpoint will return a HTTP 200 OK response and the User claims in a Nested JWT format. The following is a non-normative example of a UserInfo Response: . &lt;code style=display:block;white-space:pre-wrap&gt;HTTP/1.1 200 OK Content-Type: application/json { “sub”: “248289761001”, “name”: “Jane Doe”, “given_name”: “Jane”, “family_name”: “Doe”, “email”: “janedoe@example.com”, “picture”: “[base64 encoded picture]” }&lt;/code&gt; . For privacy reasons itsme® may elect to not return values for some requested claims. In that case the claim will be omitted from the JSON object rather than being present with a null or empty string value. However, before being able to consume the claims from the userInfo response, you will first need to validate it by following the userInfo response validation rules described in the section below. UserInfo response validation . You MUST validate the userInfo reponse in the following manner: . | As the userInfo response is a Nested JWT object, you will have to decrypt and verify it using the keys and algorithms that the you specified when registering your project in the [itsme® B2B portal](#Onboarding). The process of decryption and signature validation is described in section 4.3 of the JOSE specifications.If the userInfo response is not encrypted, the you SHOULD reject it.&lt;/br&gt; | The \"sub\" claim will always be included in the response and this should be verified by you to mitigate against token substitution attacks. The \"sub\" claim in the userInfo response MUST be verified to exactly match the \"sub\" claim in the \"id_token\"; if they do not match, the userInfo response values MUST NOT be used. | . When an error condition occurs an error response as defined in the OAuth 2.0 Bearer Token Usage specification will be returned. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#38-retrieving-user-attributes-or-devicetransaction-specific-claims",
    "relUrl": "/confirmation/#38-retrieving-user-attributes-or-devicetransaction-specific-claims"
  },"23": {
    "doc": "Confirmation",
    "title": "4. Mapping the User",
    "content": "To sign in successfully in your web desktop, mobile web or mobile application, a given user must be provisioned in OpenID Connect and then mapped to a user account in your database. By default, your application Server will use the subject identifier, or “sub” claim, in the ID Token to identify and verify a user account. Typically, the “sub” claim is a unique string that identifies a given user account. The benefit of using a “sub” claim is that it will not change, even if other user attributes (email, phone number, etc) associated with that account are updated. The “sub” claim value must be mapped to the corresponding user in your application Server. If you already mapped this “sub” to an account in your application repository, you should start an application session for that User. If no user record is storing the “sub” claim value, then you should allow the User to associate his new or existing account during the first sign-in session. All these flows are depicted in the itsme® B2B portal. In a limited number of cases (e.g. technical issue,…) a user could ask itsme® to ‘delete’ his account. As a result the specific account will be ‘archived’ (for compliancy reasons) and thus also the unique identifier(s) (e.g. “sub”), used to interact with the different Service Providers the specific user is active with, will be automatically deleted in our database. If the same user would opt to (re)create an itsme® afterwards, he will need to re-bind his itsme® account with your application server (as the initial identifier is no longer valid as explained before). To re-bind his itsme® account one of the above scenarios should be used. After successful (re)binding you will need to overwrite the initial reference with the new ‘sub’ claim value in your database. ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#4-mapping-the-user",
    "relUrl": "/confirmation/#4-mapping-the-user"
  },"24": {
    "doc": "Confirmation",
    "title": "5. Appendixes",
    "content": ". ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#5-appendixes",
    "relUrl": "/confirmation/#5-appendixes"
  },"25": {
    "doc": "Confirmation",
    "title": "5.1. Universal Links on iOS",
    "content": "&lt;code style=display:block;white-space:pre-wrap&gt;{ “applinks”: { “apps”: [], “details”: [ { “appID”: “JHGFJHHYX.com.facebook.ios”, “paths”: [ “*” ] } ] } }&lt;/code&gt; . Integration is going to be pretty straightforward, all details can be found in below steps (as documented on Universal Links official documentation): . | Register your app at developer.apple.com. | Enable ‘Associated Domains’ on your app identifier. | Enable ‘Associated Domain’ on in your Xcode project. | Add the proper domain entitlement and make sure the entitlements file is included at build: Xcode will do it automatically by itself. | Create the ‘apple-app-site-association’ file (AASA). The AASA file contains a JSON object with a list of apps and the URL paths on the domain that should be included or excluded as Universal Links.The JSON object will contain: | . | Parameter | Description | . | appID | Built by combining your app’s Team ID (it should be retrieved from https://developer.apple.com/account/#/membership/) and the Bundle Identifier. In the example attached, JHGFJHHYX is the Team ID and com.facebook.ios is the Bundle ID. | . | paths | Array of strings that specify which paths are included or excluded from association. Note: these strings are case sensitive and that query strings and fragment identifiers are ignored. | . | Upload the ‘apple-app-site-association’ file to your HTTPS web server for the redirection URI communicated in the Authentication Request. The file can be placed at the root of your server or in the .well-known subdirectory. | . While hosting the AASA file, please ensure that the AASA file: . | is served over HTTPS. | uses application/json MIME type. | don’t append .json to the apple-app-site-association filename. | has a size not exceeding 128 Kb (requirement in iOS 9.3.1 onwards) | . | Check if the AASA file is valid and is accessible by using the following link. | Add an entitlement to all redirect URI that the your app need to supports. In Xcode, open the Associated Domains section in the Capabilities tab and add an entry for each Redirect URI that your app supports, prefixed with `applinks`.To match all subdomains of an associated redirect URI, you can specify a wildcard by prefixing `*.` before the beginning of a specific Redirect URI (the period is required). Redirect URI matching is based on the longest substring in the `applinks` entries. For example, if you specify the entries `applinks:*.mywebsite.com` and `applinks:*.users.mywebsite.com`, matching for the redirect URI `emily.users.mywebsite.com` is performed against the longer `*.users.mywebsite.com` entry. Note that an entry for `*.mywebsite.com` does not match `mywebsite.com` because of the period after the asterisk. To enable matching for both `*.mywebsite.com` and `mywebsite.com`, you need to provide a separate `applinks` entry for each. | . Apple doc says to limit this list to no more than about 20 to 30 domains . | Update the app delegate to respond appropriately when it receives the `NSUserActivity` object. After all above steps are completed perfectly, when the User click a universal link, the app will open up and the method \"application:continueUserActivity:restorationHandler\" will get called in \"Appdelegate\". When iOS launches the the app after a User taps a universal link, you receive an \"NSUserActivity\" object with an \"activityType\" value of \"NSUserActivityTypeBrowsingWeb\". The activity object’s \"webpageURL\" property contains the redirect URI that the user is accessing. The webpage URL property always contains an HTTPS URL, and you can use \"NSURLComponents\" APIs to manipulate the components of the URL.For getting the URL parameters, use the function aside.Also if you want to check if the app had opened by clicking a universal link or not in the `didFinishLaunchingWithOptions` method below. | . &lt;code style=display:block;white-space:pre-wrap&gt;func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([Any]?) -&gt; Void) -&gt; Bool { print(“Continue User Activity called: “) if userActivity.activityType == NSUserActivityTypeBrowsingWeb { let url = userActivity.webpageURL! print(url.absoluteString) //handle url and open whatever page you want to open. } return true }&lt;/code&gt; . &lt;code style=display:block;white-space:pre-wrap&gt;//playground code.. var str = “https://google.com/contents/someotherpath?category=series&amp;contentid=1562167825” let url = URL(string: str) func queryParameters(from url: URL) -&gt; [String: String] { let urlComponents = URLComponents(url: url, resolvingAgainstBaseURL: false) var queryParams = String: String for queryItem: URLQueryItem in (urlComponents?.queryItems)! { if queryItem.value == nil { continue } queryParams[queryItem.name] = queryItem.value } return queryParams } // print the url parameters dictionary print(queryParameters(from: url!)) . //It will print [“category”: “series”, “contentid”: “1562167825”]&lt;/code&gt; . &lt;code style=display:block;white-space:pre-wrap&gt;func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey : Any]? = nil) -&gt; Bool { var isUniversalLinkClick: Bool = false if launchOptions[UIApplicationLaunchOptionsUserActivityDictionaryKey] { let activityDictionary = launchOptions[UIApplicationLaunchOptionsUserActivityDictionaryKey] as? [AnyHashable: Any] ?? AnyHashable: Any let activity = activityDictionary[“UIApplicationLaunchOptionsUserActivityKey”] as? NSUserActivity ?? NSUserActivity() if activity != nil { isUniversalLinkClick = true } } if isUniversalLinkClick { // app opened via clicking a universal link. } else { // set the initial viewcontroller } return true }&lt;/code&gt; . ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#51-universal-links-on-ios",
    "relUrl": "/confirmation/#51-universal-links-on-ios"
  },"26": {
    "doc": "Confirmation",
    "title": "5.2. App Links on Android",
    "content": "The App Links Assistant in Android Studio can help you create intent filters in your manifest and map existing URLs from your website to activities in your app. Follow below steps to configure the App links (as documented on App Links official documentation): . | Add the intent filters to your manifest. Go through the your manifest and select Tools &gt; App Links Assistant. Click Open URL Mapping Editor and then click Add at the bottom of the URL Mapping list to add a new URL mapping. | Add details for the new URL mapping: . | Entering your redirect URI in the \"host\" field. | Add a \"path\", \"pathPrefix\", or \"pathPattern\" for the redirect URIs you want to map. For example, if you have a recipe-sharing app, with all the recipes available in the same activity, and your corresponding website's recipes are all in the same \"/recipe directory\", use \"pathPrefix\" and enter \"/recipe\". This way, the redirect URI http://www.recipe-app.com/recipe/grilled-potato-salad maps to the activity you select in the following step. | Select the Activity the redirect URI should take Users to. | Click OK. | . | The App Links Assistant adds intent filters based on your URL mapping to the \"AndroidManifest.xml\" file, and highlights it in the \"Preview\" field. If the you would like to make any changes, click Open \"AndroidManifest.xml\" to edit the intent filter. | &lt;/ol&gt; To support more links without updating the app, you should define a URL mapping that supports future redirect URIs. | To verify the URL mapping works properly, enter a URL in the Check URL Mapping field and click Check Mapping. If it's working correctly, the success message shows that the URL entered maps to the activity you selected. | Handle incoming links. Once you have verified that the URL mapping is working correctly, you MUST add the logic to handle the intent he created. | Click Select Activity from the App Links Assistant. | Select an activity from the list and click Insert Code. | . The App Links Assistant adds code to the activity's Java file, similar to the one aside. However, this code isn't complete on its own. You MUST now take an action based on the URI in , such as display the corresponding content. For example, for the recipe-sharing app, the code might look like the sample aside. &lt;/li&gt; &lt;/ol&gt; &lt;code style=display:block;white-space:pre-wrap&gt;protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); ... handleIntent(getIntent()); } protected void onNewIntent(Intent intent) { super.onNewIntent(intent); handleIntent(intent); } private void handleIntent(Intent intent) { String appLinkAction = intent.getAction(); Uri appLinkData = intent.getData(); if (Intent.ACTION_VIEW.equals(appLinkAction) &amp;&amp; appLinkData != null){ String recipeId = appLinkData.getLastPathSegment(); Uri appData = Uri.parse(\"content://com.recipe_app/recipe/\").buildUpon() .appendPath(recipeId).build(); showRecipe(appData); } }&lt;/code&gt; . | Associate the app with the redirect URI. After setting up URL support for your app, the App Links Assistant generates a Digital Asset Links file you can use to associate his website with your app. As an alternative to using the Digital Asset Links file, you can associate your site and app in Search Console. To associate the app and the website using the App Links Assistant, click Open the Digital Asset Links File Generator from the App Links Assistant: | Enter your Site domain and Application ID. | To include support in your Digital Asset Links file for Smart Lock for Passwords, select Support sharing credentials between the app and the website and enter your site's login URL. This adds the following string to your Digital Asset Links file declaring that your app and website share sign-in credentials: \"delegate_permission/common.get_login_creds\". | Specify the signing config or select a keystore file. Make sure to select the right config or keystore file for either the release build or debug build of your app. If you want to set up his production build, use the release config. If you want to test his build, use the debug config. | Click \"Generate Digital Asset Links\" file. | Once Android Studio generates the file, click \"Save file\" to download it. | Upload the \"assetlinks.json\" file to redirect URI site, with read-access for everyone, at \"https:///.well-known/assetlinks.json\"&lt;/i&gt;.&lt;/li&gt; | Click \"Link and Verify\" to confirm that you've uploaded the correct Digital Asset Links file to the correct location. &lt;/ol&gt; The system verifies the Digital Asset Links file via the encrypted HTTPS protocol. Make sure that the assetlinks.json file is accessible over an HTTPS connection, regardless of whether your app's intent filter includes https. | . | . | . ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/#52-app-links-on-android",
    "relUrl": "/confirmation/#52-app-links-on-android"
  },"27": {
    "doc": "Confirmation",
    "title": "Confirmation",
    "content": " ",
    "url": "https://belgianmobileid.github.io/doc/confirmation/",
    "relUrl": "/confirmation/"
  },"28": {
    "doc": "Welcome",
    "title": "Welcome",
    "content": "itsme® API allows partners to use verified identities for authentication and authorization on web desktop, mobile web or mobile applications. Learn how to integrate our services that you and your business will benefit from. For a more detailed, in-depth explanation of each, please read through the appropriate developer docs. ",
    "url": "https://belgianmobileid.github.io/doc/index",
    "relUrl": "/index"
  },"29": {
    "doc": "Welcome",
    "title": "Use cases",
    "content": "For more information on how itsme® can best work for your business, please contact us. itsme® will be happy to help ! . ",
    "url": "https://belgianmobileid.github.io/doc/index#use-cases",
    "relUrl": "/index#use-cases"
  },"30": {
    "doc": "Welcome",
    "title": "Services",
    "content": "Head over to our developer documentation for each of our services. Here you will find: . | A techical overview | Step by step instructions on how to integrate | Code snippets | . | Services | Description | . | Authentication | Enables your users/customers to log in securely to your application (on web, tablet or mobile) | . | Identification | Enables you to identify your users and access their verified data. | . | Confirmation | Enables your users/customers to give their consent to a payment or order/action. | . | Signing | Enables your users/customers to sign documents electronically. The itsme® Sign responds to the requirements for the creation of Qualified Electronic Signature (QES). | . ",
    "url": "https://belgianmobileid.github.io/doc/index#services",
    "relUrl": "/index#services"
  },"31": {
    "doc": "Welcome",
    "title": "Getting started",
    "content": "In order to start your integration you will first need to setup your personal Sanbox environment. To do so, you will be requested to provide the following information : . | Contact details such as your email, name, phone number. | Organisation details as shown on the company register for your jurisdiction. | Information about the project you want to setup (the services you want to use, the client authentication method you want to set-up, the user attributes you want to request, ...) | . Our onboarding team will review your project and get in touch with you in no time to provide your credentials : . | a \"client_id\" | a \"service_code\" | information about your client authentication method | the list of user attributes you can request | . Request your Sandbox . ",
    "url": "https://belgianmobileid.github.io/doc/index#getting-started",
    "relUrl": "/index#getting-started"
  },"32": {
    "doc": "Test",
    "title": "testing code snippet",
    "content": "// Javascript code with syntax highlighting. var fun = function lang(l) { dateformat.i18n = require('./lang/' + l) return true; } . $ npm install -g yo generator-itsme . &lt;code style=display:block;white-space:pre-wrap&gt;$ npm install -g yo generator-itsme&lt;/code&gt; . | Parameter | Description | . | Param1required | Global description of Param1 | subparam1optional | description of subparam1 | . | subparam2required | description of subparam2 | . | . | Param2optional | Global description of Param2 | . ",
    "url": "https://belgianmobileid.github.io/doc/test/#testing-code-snippet",
    "relUrl": "/test/#testing-code-snippet"
  },"33": {
    "doc": "Test",
    "title": "Test",
    "content": "Voilà une page de test de Jekyll . First tabs . | js | ruby | . | tagada . | tsoin tsoin here goes some code . | . Second tabs . | yaml | json | . | hello: . | ‘whatsup’ | ‘hi’ | . | { “hello”: [“whatsup”, “hi”] } . | . ",
    "url": "https://belgianmobileid.github.io/doc/test/",
    "relUrl": "/test/"
  }
}
