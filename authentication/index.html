<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Authentication API - itsme OIDC Documentation</title> <link rel="shortcut icon" href="/doc/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/doc/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/doc/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/doc/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Authentication API | itsme OIDC Documentation</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Authentication API" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="This website documents how to use the itsme OpenID Connect interface." /> <meta property="og:description" content="This website documents how to use the itsme OpenID Connect interface." /> <link rel="canonical" href="https://belgianmobileid.github.io/doc/authentication/" /> <meta property="og:url" content="https://belgianmobileid.github.io/doc/authentication/" /> <meta property="og:site_name" content="itsme OIDC Documentation" /> <script type="application/ld+json"> {"description":"This website documents how to use the itsme OpenID Connect interface.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://belgianmobileid.github.io/doc/public/images/ASMARTERWAY_RGB.png"}},"headline":"Authentication API","@type":"WebPage","url":"https://belgianmobileid.github.io/doc/authentication/","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="../public/css/custom.css"> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://belgianmobileid.github.io/doc/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://belgianmobileid.github.io/doc/index" class="nav-list-link">Welcome</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://belgianmobileid.github.io/doc/directIntegration/" class="nav-list-link">Direct Integration</a> </li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://belgianmobileid.github.io/doc/authentication/" class="nav-list-link active">Authentication API</a><ul class="nav-list"><li class="nav-list-item active"><a href="#overview" class="nav-list-link">Overview</a></li><li class="nav-list-item active"><a href="#guides" class="nav-list-link">Guides</a><ul class="nav-list"><li class="nav-list-item active"><a href="#generate-itsme-button" class="nav-list-link">Generate itsme® button</a></li><li class="nav-list-item active"><a href="#client-authentication-methods" class="nav-list-link">Client Authentication methods</a></li><li class="nav-list-item active"><a href="#certificates-and-website-security" class="nav-list-link">Certificates and website security</a></li><li class="nav-list-item active"><a href="#handling-responses" class="nav-list-link">Handling responses</a></li><li class="nav-list-item active"><a href="#mapping-the-user" class="nav-list-link">Mapping the user</a></li></ul></li><li class="nav-list-item active"><a href="#api-reference" class="nav-list-link">API reference</a><ul class="nav-list"><li class="nav-list-item active"><a href="#itsme-discovery-document" class="nav-list-link">itsme® Discovery Document</a></li><li class="nav-list-item active"><a href="#authorization-request" class="nav-list-link">Authorization Request</a></li><li class="nav-list-item active"><a href="#token-request" class="nav-list-link">Token Request</a></li><li class="nav-list-item active"><a href="#userinfo-request" class="nav-list-link">UserInfo Request</a></li><li class="nav-list-item active"><a href="#revoke-request" class="nav-list-link">Revoke Request</a></li></ul></li></ul> </li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://belgianmobileid.github.io/doc/identification/" class="nav-list-link">Identification API</a> </li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://belgianmobileid.github.io/doc/confirmation/" class="nav-list-link">Confirmation API</a> </li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://belgianmobileid.github.io/doc/azureB2C/" class="nav-list-link">Azure B2C</a> </li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search itsme OIDC Documentation" aria-label="Search itsme OIDC Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h1> <p>This API is based on the Authorization Code Flow of OpenID Connect 1.0. It allows you to verify the identity of an end-user based on the authentication performed by an authorization server, as well as to obtain basic profile information about the end-user.</p> <p>The diagram below describes the <strong>Authentication</strong> process and how your systems will be interacting with itsme® :</p> <p><img src="/doc/public/images/OpenID_SeqDiag.png" alt="Sequence diagram describing the OpenID flow" /></p> <p>To get to this result please make sure you</p> <ol> <li>add itsme® button to your front-end page so the user can indicate he wishes to authenticate with itsme® : <a href="https://brand.belgianmobileid.be/d/CX5YsAKEmVI7/documentation#/ux/buttons-1518207548" target="blank">itsme® button specifications</a>.</li> <li>create the <a href="#AuthNReq">Authorization Request</a> to authenticate the User. This request will redirect the user to the itsme® app. itsme® will then authenticates the user by asking him <ul type=""> <li>to enter his phone number on the itsme® sign-in page</li> <li>authorize the release of some information to your application</li> <li>to provide his credentials (itsme® code, fingerprint or FaceID)</li> </ul><br />It is also in this Authorization Request that you will be able to request claims about the user and the Authentication event.</li> <li><a href="#AuthNResp">collect the Authorization Code</a> once the user has been authenticated and redirected by itsme® to your mobile or web application.</li> <li><a href="#TokenReq">exchange the Authorization Code for an ID token</a> (e.g. identifying the user) and an Access Token.</li> <li>Obtain the additional claims by <a href="#UserInfoReq">presenting the access token to the itsme® UserInfo Endpoint</a> if the required claims are not returned in the ID token.</li> <li>Confirm the success of the operation and display a success message.</li> </ol> <h1 id="guides"> <a href="#guides" class="anchor-heading" aria-labelledby="guides"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Guides </h1> <h2 id="generate-itsme-button"> <a href="#generate-itsme-button" class="anchor-heading" aria-labelledby="generate-itsme-button"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generate itsme® button </h2> <p>First, you will need to create a button to allow your users to authenticate with itsme®. Check the <a href="https://brand.belgianmobileid.be/d/CX5YsAKEmVI7/documentation#/ux/buttons-1518207548" target="blank">Button design guide</a> before you start the integration.</p> <p>Upon clicking this button, the browser will redirect the User to our Front-End. itsme® then take care of authenticating him.</p> <h2 id="client-authentication-methods"> <a href="#client-authentication-methods" class="anchor-heading" aria-labelledby="client-authentication-methods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Client Authentication methods </h2> <p>itsme® supports the following authentication methods to protect the exchange of sensitive information and ensure the requested information gets issued to a legitimate application and not some other party :</p> <ul> <li>asymmetric RSA key pair</li> <li>symmetric shared secret</li> </ul> <p>itsme® recommend using the asymmetric RSA key pair method and allow you to rotate your keys without the need to sync with us.</p> <h3 id="asymmetric-rsa"> <a href="#asymmetric-rsa" class="anchor-heading" aria-labelledby="asymmetric-rsa"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Asymmetric RSA </h3> <p>This method requires that each party exposes its public keys as a simple JWK Set document on a URI publicly accessible, and keep its private keys for itself. For itsme®, this URI can be retrieved from the <a href="#OpenIDConfig">itsme® Discovery document</a>, using the <i>“jwks_uri”</i> key.</p> <p>Your private and public keys can be generated using your own tool or via Yeoman. If using Yeoman, you need to install generator-itsme with NPM:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install -g yo generator-itsme
</code></pre></div></div> <p>After installation, run the generator:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yo itsme
</code></pre></div></div> <p>The Yeoman tool will generate two files, the jwks_private.json which MUST be stored securely in your system, and the jwks_public.json which needs to be exposed as a JWK Set on a URI publicly accessible and have the HTTPS scheme.</p> <aside class="notice">Whatever the tool you are choosing to create your key pairs, don't forget to send your JWK Set URI by email to <a href="mailto: onboarding@itsme.be">onboarding@itsme.be</a> and itsme® will make sure to complete the configuration for you in no time! </aside> <h3 id="symmetric-secret"> <a href="#symmetric-secret" class="anchor-heading" aria-labelledby="symmetric-secret"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Symmetric secret </h3> <p>This method requires the exchange of a static secret that will be used to authenticate with our Back-End.</p> <p>The client_secret value will be provided by itsme® when <a href="https://belgianmobileid.github.io/doc/getting-started.html#getting-started" target="blank">registering your project</a>.</p> <h2 id="certificates-and-website-security"> <a href="#certificates-and-website-security" class="anchor-heading" aria-labelledby="certificates-and-website-security"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Certificates and website security </h2> <p>itsme® requires HTTPS connections to guarantee security. This means the itsme API can only be accessed through the secure <code>https</code> protocol. All of the API URL we publish use HTTPS.</p> <p>With the <code>https</code> protocol, a web site operator obtains a certificate by applying to a certificate authority with a certificate signing request. The certificate request is an electronic document that contains the web site name, company information and the public key. The certificate provider signs the request, thus producing a public certificate. During web browsing, this public certificate is served to any web browser that connects to the web site and proves to the web browser that the provider believes it has issued a certificate to the owner of the web site.</p> <p>A certificate provider can opt to issue three types of certificates, each requiring its own degree of vetting rigor. In order of increasing rigor (and naturally, cost) they are: Domain Validation, Organization Validation and Extended Validation.</p> <p>The Domain Validation certificate doesn’t provide sufficient identity guarantees to itsme. So, <b>only the Organization Validation and Extended Validation certificates</b> are supported. For example, using the Let’s Encrypt open certificate authority is not suffcient because it only provide standard Domain Validation certificates.</p> <aside class="notice">The chain of trust of these certificates need to be publicly accessible, meaning that our systems need to be able to access the root and the intermediate certificates. </aside> <h2 id="handling-responses"> <a href="#handling-responses" class="anchor-heading" aria-labelledby="handling-responses"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handling responses </h2> <p>Whenever a partner is sending a request to the itsme OIDC endpoints he will get a response back. According to the OIDC protocol, and depending on the endpoint that was contacted, partners can get a</p> <ul> <li>response where some parameters are added to the query component of the redirection URI using the "application/x-www-form-urlencoded" format, or</li> <li>response displayed directly on our itsme® sign-in page ;</li> <li>response using the "application/json" media type</li> </ul> <p>This is a standard for data communication that’s easy to read for humans as well as machines. Alongside the type of response an HTTP status code is sent that shows whether the request was successful or not. If it was not, you can tell by the code and the message in the response what went wrong, why it went wrong and whether there is something the partner can do about it.</p> <h3 id="a-successful-response"> <a href="#a-successful-response" class="anchor-heading" aria-labelledby="a-successful-response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A successful response </h3> <p>An HTTP status <code>200 OK</code> or <code>302 Found</code> is issued whenever your request was a success. You see this type of response in our examples like the one where we successfully retrieve the <a href="https://belgianmobileid.github.io/doc/authentication/#example-1" target="blank">Token Response</a>.</p> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">openid.c2id.com</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>

grant_type=authorization_code
 &amp;code=SplxlOBeZQQYbYS6WxSbIA
 &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
 &amp;client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer
 &amp;client_assertion=PHNhbWxwOl ... ZT
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc
    yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5
    NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ
    fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz
    AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q
    Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ
    NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd
    QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS
    K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4
    XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg"</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SlAV32hkKG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="the-error-responses"> <a href="#the-error-responses" class="anchor-heading" aria-labelledby="the-error-responses"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The error responses </h3> <p>Things will sometimes go wrong. Concretely,</p> <p><u><i>Authorization Request</i></u> - if the request fails due to a missing, invalid, or mismatching redirection URI, or if the client identifier is missing or invalid,… the Authorization Endpoint will inform you of the error our itsme® sign-in page (possible values are listed in the table below).</p> <p><img src="/doc/public/images/AuthorizationEndpoint_ErrorResponse.png" alt="Authorization Endpoint error reponse" /></p> <p>If the User denies the access request or the User authentication fails, the Authorization Endpoint will inform you by adding the following parameters to the query component of the redirection URI using the “application/x-www-form-urlencoded” format :</p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">error</div><div class="paramReq">REQUIRED</div></td> <td>A single ASCII error code.</td> </tr> <tr> <td><div class="paramName">error_description</div><div class="paramReq">OPTIONAL</div></td> <td>Human-readable text providing additional information, used to assist the developer in understanding the error that occurred.</td> </tr> <tr> <td><div class="paramName">state</div><div class="paramReq"></div></td> <td>The string value provided in the Authorization Request. You SHOULD validate that the value returned matches the one supplied.</td> </tr> </tbody> </table></div> <p>For example, the Authorization Endpoint redirects the User by sending the following HTTP response:</p> <p><code>HTTP/1.1 302 Found Location: https://client.example.com/cb?error=access_denied&amp;state=xyz</code></p> <p><u><i>Token Request</i></u> - if the request fails the Token Endpoint responds with an HTTP 400 (Bad Request) status code and includes the fllowing parameters in the entity-body of the HTTP response using the “application/json” media type :</p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">error</div><div class="paramReq">REQUIRED</div></td> <td>A single ASCII error code.</td> </tr> <tr> <td><div class="paramName">error_description</div><div class="paramReq">OPTIONAL</div></td> <td>Human-readable text providing additional information, used to assist the developer in understanding the error that occurred.</td> </tr> <tr> <td><div class="paramName">state</div><div class="paramReq"></div></td> <td>The string value provided in the Authorization Request. You SHOULD validate that the value returned matches the one supplied.</td> </tr> </tbody> </table></div> <p>For example:</p> <p><code>HTTP/1.1 400 Bad Request Content-Type: application/json;charset=UTF-8 Cache-Control: no-store Pragma: no-cache { "error":"invalid_request" }</code></p> <p><u><i>UserInfo Request</i></u> - When a request fails, the UserInfo Endpoint responds using the appropriate HTTP status code (typically, 400, 401, 403, or 405) and includes specific error codes in the response.</p> <p>For example:</p> <p><code>HTTP/1.1 401 Unauthorized WWW-Authenticate: Bearer realm="example"</code></p> <h3 id="possible-error-codes-and-corresponding-error-description"> <a href="#possible-error-codes-and-corresponding-error-description" class="anchor-heading" aria-labelledby="possible-error-codes-and-corresponding-error-description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Possible error codes and corresponding error description </h3> <p><i><b>Authorization Endpoint errors</b></i></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">invalid_request</div><div class="paramReq"></div></td> <td>The request is missing a required parameter, includes an invalid parameter value, includes a parameter more than once, or is otherwise malformed.</td> </tr> <tr> <td><div class="paramName">login_required</div><div class="paramReq"></div></td> <td>The Authorization Endpoint requires User authentication. This error MAY be returned when the <code>prompt</code> parameter value in the Authorization Request is <code>none</code>, but the Authentication Request cannot be completed without displaying a user interface for User authentication.</td> </tr> <tr> <td><div class="paramName">interaction_required</div><div class="paramReq"></div></td> <td>The Authorization Endpoint requires User interaction of some form to proceed. This error MAY be returned when the <code>prompt</code> parameter value in the Authorization Request is <code>none</code>, but the Autorization Request cannot be completed without displaying a user interface for User interaction.</td> </tr> <tr> <td><div class="paramName">unsupported_request</div><div class="paramReq"></div></td> <td>The request contains a not supported parameter.</td> </tr> <tr> <td><div class="paramName">invalid_client_id</div><div class="paramReq"></div></td> <td>The request contains an invalid <code>client_id</code>.</td> </tr> <tr> <td><div class="paramName">invalid_redirect_uri</div><div class="paramReq"></div></td> <td>The request contains an invalid redirect URI.</td> </tr> <tr> <td><div class="paramName">unsupported_grant_type</div><div class="paramReq"></div></td> <td>Grant type not supported.</td> </tr> <tr> <td><div class="paramName">invalid_grant</div><div class="paramReq"></div></td> <td>Invalid grant.</td> </tr> <tr> <td><div class="paramName">invalid_scope</div><div class="paramReq"></div></td> <td>The requested scope is invalid, unknown, or malformed.</td> </tr> <tr> <td><div class="paramName">unsupported_display</div><div class="paramReq"></div></td> <td>Only <code>page</code> is supported.</td> </tr> <tr> <td><div class="paramName">unauthorized_client</div><div class="paramReq"></div></td> <td>Unknown or unspecified <code>client_id</code>.</td> </tr> <tr> <td><div class="paramName">unsupported_response_type</div><div class="paramReq"></div></td> <td>The Authorization Endpoint does not support obtaining an authorization code using this method.</td> </tr> <tr> <td><div class="paramName">invalid_request_object</div><div class="paramReq"></div></td> <td>The <code>request</code> parameter contains an invalid Request Object.</td> </tr> <tr> <td><div class="paramName">invalid_request_uri</div><div class="paramReq"></div></td> <td>The <code>request_uri</code> in the Authorization Request returns an error or contains invalid data.</td> </tr> <tr> <td><div class="paramName">invalid_request</div><div class="paramReq"></div></td> <td>Oauth2 parameters do not match Request object.</td> </tr> <tr> <td><div class="paramName">temporary_unavailable</div><div class="paramReq"></div></td> <td>The authorization server is currently unable to handle the request due to a temporary overloading or maintenance of the server.</td> </tr> </tbody> </table></div> <p><strong><em>Token Endpoint errors</em></strong></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">invalid_request</div><div class="paramReq"></div></td> <td>The request is missing a required parameter, includes an unsupported parameter value (other than grant type), repeats a parameter, includes multiple credentials, utilizes more than one mechanism for authenticating the client, or is otherwise malformed.</td> </tr> <tr> <td><div class="paramName">invalid_client</div><div class="paramReq"></div></td> <td>Client authentication failed (e.g., unknown client, no client authentication included, or unsupported authentication method).</td> </tr> </tbody> </table></div> <p><strong><em>UserInfo Endpoint errors</em></strong></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">invalid_request</div><div class="paramReq"></div></td> <td>The request is missing a required parameter, includes an unsupported parameter or parameter value, repeats the same parameter, uses more than one method for including an access token, or is otherwise malformed.</td> </tr> <tr> <td><div class="paramName">invalid_token</div><div class="paramReq"></div></td> <td>The access token provided is expired, revoked, malformed, or invalid for other reasons.</td> </tr> </tbody> </table></div> <h2 id="mapping-the-user"> <a href="#mapping-the-user" class="anchor-heading" aria-labelledby="mapping-the-user"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Mapping the user </h2> <p>To sign in successfully in your web desktop, mobile web or mobile application, a given user must be mapped to a user account in your database. By default, your application Server will use the subject identifier, or <code>sub</code> claim, in the ID Token to identify and verify a user account. The <code>sub</code> claim is a string that uniquely identifies a given user account. The benefit of using a <code>sub</code> claim is that it will not change, even if other user attributes (email, phone number, etc) associated with that account are updated.</p> <p>The <code>sub</code> claim value must be mapped to the corresponding user in your application Server.</p> <p>If no user record is storing the <code>sub</code> claim value, then you should allow the user to associate his new or existing account to the <code>sub</code>.</p> <p>All these flows are depicted in the itsme® B2B portal.</p> <p>In a limited number of cases (e.g. technical issue,…) a user could ask itsme® to ‘delete’ his account. As a result the specific account will be ‘archived’ (for compliancy reasons) and thus also the unique identifier(s) (e.g. “sub”).</p> <p>If the same user would opt to re-create an itsme® afterwards, he will need to re-bind his itsme® account with your application server, in the same way as for the initial binding. After successful re-binding you will need to overwrite the initial reference with the new <code>sub</code> claim value in your database.</p> <h1 id="api-reference"> <a href="#api-reference" class="anchor-heading" aria-labelledby="api-reference"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API reference </h1> <p><a id="OpenIDConfig"></a></p> <h2 id="itsme-discovery-document"> <a href="#itsme-discovery-document" class="anchor-heading" aria-labelledby="itsme-discovery-document"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> itsme® Discovery Document </h2> <ul class="tab" data-tab="d80a343d-5c50-46df-8b8d-78e741340165"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric keys </a> </li> </ul> <ul class="tab-content" id="d80a343d-5c50-46df-8b8d-78e741340165"> <li class="active"> <p><b><code>GET https://idp.<i>[e2e/prd]</i>.itsme.services/v2/.well-known/openid-configuration</code></b></p> <p>To simplify implementations and increase flexibility, <a href="https://openid.net/specs/openid-connect-discovery-1_0.html" target="blank">OpenID Connect allows the use of a Discovery Document</a>, a JSON document containing key-value pairs which provide details about itsme® configuration, such as the</p> <ul> <li>Authorization, Token and userInfo Endpoints</li> <li>supported claims</li> <li>...</li> </ul> </li> <li> <p><b><code>GET https://oidc.<i>[e2e/prd]</i>.itsme.services/clientsecret-oidc/csapi/v0.1/.well-known/openid-configuration</code></b></p> <p>To simplify implementations and increase flexibility, <a href="https://openid.net/specs/openid-connect-discovery-1_0.html" target="blank">OpenID Connect allows the use of a Discovery Document</a>, a JSON document containing key-value pairs which provide details about itsme® configuration, such as the</p> <ul> <li>Authorization, Token and userInfo Endpoints</li> <li>supported claims</li> <li>...</li> </ul> </li> </ul> <p><a id="AuthNReq"></a></p> <h2 id="authorization-request"> <a href="#authorization-request" class="anchor-heading" aria-labelledby="authorization-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authorization Request </h2> <ul class="tab" data-tab="63b4e1e7-87f7-4283-8f0e-7744a596a993"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="63b4e1e7-87f7-4283-8f0e-7744a596a993"> <li class="active"> <p><b><code>GET https://idp.<i>[e2e/prd]</i>.itsme.services/v2/authorization</code></b></p> <h3 id="parameters"> <a href="#parameters" class="anchor-heading" aria-labelledby="parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parameters </h3> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">client_id</div><div class="paramReq">REQUIRED</div></td> <td>It identifies your application. This parameter value is generated during registration.</td> </tr> <tr> <td><div class="paramName">response_type</div><div class="paramReq">REQUIRED</div></td> <td>This defines the processing flow to be used when forming the response. Because itsme® supports the Authorization Code Flow, this value MUST be <code>code</code>.</td> </tr> <tr> <td><div class="paramName">scope</div><div class="paramReq">REQUIRED</div></td> <td> It allows your application to express the desired scope of the access request. Each scope returns a set of user attributes. The scopes an application should request depend on which user attributes your application needs. Once the user authorizes the requested scopes, his details are returned in an ID Token and are also available through the UserInfo Endpoint.<br /><br />All scope values must be space-separated.<br /><br />The basic (and required) scopes are <code>openid</code> and <code>service</code>. Beyond that, your application can ask for additional standard scopes values which map to sets of related claims are: <code>profile</code> <code>email</code> <code>address</code> <code>phone</code><br /> <div class="table-wrapper"><table> <tr> <td><div class="paramName">service</div><div class="paramReq">REQUIRED</div></td><td>It indicates the itsme® service your application intends to use, e.g. <code>service:TEST_code</code> by replacing "TEST_code" with the service code generated during registration.</td> </tr> <tr> <td><div class="paramName">openid</div><div class="paramReq">REQUIRED</div></td><td>It indicates that your application intends to use the OpenID Connect protocol to verify a user's identity by returning a <code>sub</code> claim which represents a unique identifier for the authenticated user.</td> </tr> <tr> <td><div class="paramName">profile</div><div class="paramReq">OPTIONAL</div></td><td>Returns claims that represent basic profile information, specifically <code>family_name</code>, <code>given_name</code>, <code>name</code>, <code>gender</code> and <code>birthdate</code>.</td> </tr> <tr> <td><div class="paramName">email</div><div class="paramReq">OPTIONAL</div></td><td>Returns the <code>email</code> claim, which contains the user's email address, and <code>email_verified</code>, which is a boolean indicating whether the email address was verified by the user.</td> </tr> <tr> <td><div class="paramName">address</div><div class="paramReq">OPTIONAL</div></td><td>Returns the information about the user's postal address. The value of the address member is a JSON structure containing some or all of these members <code>formatted</code> <code>street_address</code> <code>postal_code</code> <code>locality</code> <code>country</code></td> </tr> <tr> <td><div class="paramName">phone</div><div class="paramReq">OPTIONAL</div></td><td>Returns the <code>phone</code> claim, which contains the user's phone number, and <code>phone_number_verified</code>, which is a boolean indicating whether the phone number was verified by the user.</td> </tr> </table></div> </td> </tr> <tr> <td><div class="paramName">redirect_uri</div><div class="paramReq">REQUIRED</div></td> <td>It is the URL to which users are redirected once the authentication is complete. It MUST match the value preregistered during the registration and use the HTTPS scheme. http://localhost is only permitted for development purposes, it’s not for use in production.<br /><br /><b>Note</b> : if relevant (in case you have a mobile app) make sure that your redirect URIs support the Universal links and App links mechanism. Functionally, it will allow you to have only one single link that will either open your desktop web application, your mobile app or your mobile site on the User’s device. Universal links and App links are standard web links (http://mydomain.com) that point to both a web page and a piece of content inside an app. When a Universal Link is opened, the app OS checks to see if any installed app is registered for that domain. If so, the app is launched immediately without ever loading the web page. If not, the web URL is loaded into the webbrowser.</td> </tr> <tr> <td><div class="paramName">state</div><div class="paramReq">Strongly RECOMMENDED</div></td> <td>Specifies any string value that your application uses to maintain state between your Authorization Request and the Authorization Server's response. You can use this parameter for several purposes, such as directing the user to the correct resource in your application and mitigating cross-site request forgery.</td> </tr> <tr> <td><div class="paramName">nonce</div><div class="paramReq">Strongly RECOMMENDED</div></td> <td>A string value used to associate a session with an ID Token, and to mitigate replay attacks. The value is passed through unmodified from the Authentication Request to the ID Token.</td> </tr> <tr> <td><div class="paramName">login_hint</div><div class="paramReq">OPTIONAL</div></td> <td>If your application knows which user is trying to authenticate, it can use this parameter to pre-fill the phone number of the user on the itsme® sign-in page, e.g. <code>32+123456789</code> with <code>32</code> the country code and <code>123456789</code> the user's phone number.</td> </tr> <tr> <td><div class="paramName">ui_locales</div><div class="paramReq">OPTIONAL</div></td> <td>Indicates the user's preferred languages for the itsme® sign-in page, represented as a space-separated list of language tag values, ordered by preference.<br /><br />Possible values : <code>fr</code> <code>nl</code> <code>de</code> <code>en</code></td> </tr> <tr> <td><div class="paramName">display</div><div class="paramReq">OPTIONAL</div></td> <td>Specify how the itsme® sign-in page should be displayed to the user. If set to <code>touch</code>, it SHOULD displays the itsme® sign-in page with a device that leverages a touch interface. If set to <code>page</code>, the itsme® sign-in UI SHOULD be consistent with a full page view of the User-Agent. If the <code>display</code> parameter is not specified, this is the default display mode.</td> </tr> <tr> <td><div class="paramName">acr_values</div><div class="paramReq">OPTIONAL</div></td> <td>Indicates the authentication method required to process the request, represented as a space-separated list of tag values, ordered by preference.<br /><br />Possible values : <code>http://itsme.services/v2/claim/acr_basic</code> <code>http://itsme.services/v2/claim/acr_advanced</code><br /><br /><b>Note</b> : If these two values are provided only the most constraining authentication method will be applied, e.g. <code>http://itsme.services/v2/claim/acr_advanced</code>.<br /> <div class="table-wrapper"><table> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/acr_basic</div><div class="paramReq"></div></td><td>It lets the user to choose either fingerprint usage (if device is compatible) or itsme® code. If the <code>acr_values</code> parameter is not specified, this is the default authentication method.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/acr_advanced</div><div class="paramReq"></div></td><td>It forces the user to use his itsme® code.</td> </tr> </table></div> </td> </tr> <tr> <td><div class="paramName">claims</div><div class="paramReq">OPTIONAL</div></td> <td>Requests specific user's details to be returned from the UserInfo Endpoint and/or in the ID Token. It is represented as a JSON object that has two members - <code>{"userinfo":{...}</code> and <code>{"id_token":{...}</code>, which content indicates which claims to return at the UserInfo Endpoint and which at the ID Token, together with indication whether the claim is voluntary (default) or essential.<br /><br />Possible user's details your application can request is listed below.<br /> <div class="table-wrapper"><table> <tr> <td><div class="paramName">name</div><div class="paramReq">OPTIONAL</div></td><td>User's full name in displayable form including all name parts, possibly including titles and suffixes</td> </tr> <tr> <td><div class="paramName">given_name</div><div class="paramReq">OPTIONAL</div></td><td>Given name(s) or first name(s) of the user. Note that in some cultures, people can have multiple given names; all can be present, with the names being separated by space characters.</td> </tr> <tr> <td><div class="paramName">family_name</div><div class="paramReq">OPTIONAL</div></td><td>Surname(s) or last name(s) of the user. Note that in some cultures, people can have multiple family names or no family name; all can be present, with the names being separated by space characters.</td> </tr> <tr> <td><div class="paramName">birtdate</div><div class="paramReq">OPTIONAL</div></td><td>User's birthday, represented as a YYYY-MM-DD format.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/birthdate_as_string</div><div class="paramReq">OPTIONAL</div></td><td>User's birthday, represented as a string.</td> </tr> <tr> <td><div class="paramName">gender</div><div class="paramReq">OPTIONAL</div></td><td>User's gender. Possible values are : <code>female</code> <code>male</code></td> </tr> <tr> <td><div class="paramName">email</div><div class="paramReq">OPTIONAL</div></td><td>User's email address.</td> </tr> <tr> <td><div class="paramName">email_verified</div><div class="paramReq">OPTIONAL</div></td><td><code>true</code> if the user's e-mail address is verified; otherwise <code>false</code>.</td> </tr> <tr> <td><div class="paramName">phone_number</div><div class="paramReq">OPTIONAL</div></td><td>User's phone number, in <a href="https://en.wikipedia.org/wiki/E.164" target="blank">E.164</a> format.</td> </tr> <tr> <td><div class="paramName">phone_number_verified</div><div class="paramReq">OPTIONAL</div></td><td><code>true</code> if the user's e-phone number is verified; otherwise <code>false</code>.</td> </tr> <tr> <td><div class="paramName">address</div><div class="paramReq">OPTIONAL</div></td><td>Returns the information about the user's postal address. The value of the address is a JSON structure containing some or all of these members <code>formatted</code> <code>street_address</code> <code>postal_code</code> <code>locality</code> <code>country</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/claim_citizenship</div><div class="paramReq">OPTIONAL</div></td><td>The jurisdiction that has conferred citizenship rights to the user, in <a href="https://en.wikipedia.org/wiki/ISO_3166" target="blank">ISO 3166</a> format.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/place_of_birth</div><div class="paramReq">OPTIONAL</div></td><td>The location where the user was born. The value of this attribute is a JSON structure containing some or all of these members <code>formatted</code> <code>city</code> <code>country</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/physical_person_photo</div><div class="paramReq">OPTIONAL</div></td><td>XXX</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/BEeidSn</div><div class="paramReq">OPTIONAL</div></td><td>Returns the Belgian ID card number, 12 digits in the form xxx-xxxxxxx-yy. The check-number yy is the remainder of the division of xxxxxxxxxx by 97.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/claim_device</div><div class="paramReq">OPTIONAL</div></td><td>Returns information about the user's phone. The value of this attribute is a JSON structure containing some or all of these members <code>os</code> <code>appName</code> <code>appRelease</code> <code>deviceLabel</code> <code>debugEnabled</code> <code>deviceID</code> <code>osRelease</code> <code>manufacturer</code> <code>deviceLockLevel</code> <code>smsEnabled</code> <code>rooted</code> <code>msisdn</code> <code>deviceModel</code> <code>sdkRelease</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/transaction_info</div><div class="paramReq">OPTIONAL</div></td><td>Returns information about the itsme® transaction. The value of this attribute is a JSON structure containing some or all of these members <code>securityLevel</code> <code>bindLevel</code> <code>appRelease</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/BENationalNumber</div><div class="paramReq">OPTIONAL</div></td><td>Returns the unique identification number of natural persons who are registered in Belgium. This number consists of 11 digits of the form yy.mm.dd-xxx.cd where yy.mm.dd is the birthdate of the person, xxx a sequential number (odd for males and even for females) and cd a check-digit.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/claim_nl_bsn</div><div class="paramReq">OPTIONAL</div></td><td>Returns the citizen service number, a unique registration number for everyone who lives in the Netherlands. This number consists of 8 to 9 digits.</td> </tr> </table></div> </td> </tr> <tr> <td><div class="paramName">request_uri</div><div class="paramReq">OPTIONAL</div></td> <td>A URL using the https scheme referencing a resource containing a JWT whose claims are the request parameters. The <code>request_uri</code> parameter is used to secure parameters in the authentication request from tainting or inspection when sending the request to the itsme® Authorization Endpoint.<br /><br />If used, the JWT MUST be signed then encrypted, with the result being a Nested JWT.</td> </tr> <tr> <td><div class="paramName">request</div><div class="paramReq">OPTIONAL</div></td> <td>It represents the request as a JWT whose Claims are the request parameters. The <code>request</code> parameter is used to secure parameters in the authentication request from tainting or inspection when sending the request to the itsme® Authorization Endpoint.<br /><br />If used, the JWT MUST be signed then encrypted, with the result being a Nested JWT.</td> </tr> </tbody> </table></div> <p><a id="AuthNResp"></a></p> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p><code>302</code> <code>application/x-www-form-urlencoded</code></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">code</div><div class="paramReq"></div></td> <td>An intermediate opaque credential used to retrieve the ID Token and Access Token.<br /><br /><b>Note</b> : the code has a lifetime of 3 minutes.</td> </tr> <tr> <td><div class="paramName">state</div><div class="paramReq"></div></td> <td>The string value provided in the Authorization Request. You SHOULD validate that the value returned matches the one supplied.</td> </tr> </tbody> </table></div> <p><strong><em>Error reponses</em></strong></p> <p>If the request fails due to a missing, invalid, or mismatching redirection URI, or if the client identifier is missing or invalid, the authorization server informs you about the error and will not automatically redirect the User to the invalid redirection URI.</p> <p>If the User denies the access request or if the request fails for reasons other than a missing or invalid redirection URI, the authorization server informs you by adding the following parameters to the query component of the redirection URI using the “application/x-www-form-urlencoded” format</p> </li> <li> <p><b><code>GET https://oidc.<i>[e2e/prd]</i>.itsme.services/clientsecret-oidc/csapi/v0.1/connect/authorize</code></b></p> <h3 id="parameters"> <a href="#parameters" class="anchor-heading" aria-labelledby="parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parameters </h3> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">client_id</div><div class="paramReq">REQUIRED</div></td> <td>It identifies your application. This parameter value is generated during registration.</td> </tr> <tr> <td><div class="paramName">response_type</div><div class="paramReq">REQUIRED</div></td> <td>This defines the processing flow to be used when forming the response. Because itsme® supports the Authorization Code Flow, this value MUST be <code>code</code>.</td> </tr> <tr> <td><div class="paramName">scope</div><div class="paramReq">REQUIRED</div></td> <td> It allows your application to express the desired scope of the access request. Each scope returns a set of user attributes. The scopes an application should request depend on which user attributes your application needs. Once the user authorizes the requested scopes, his details are returned in an ID Token and are also available through the UserInfo Endpoint.<br /><br />All scope values must be space-separated.<br /><br />The basic (and required) scopes is <code>openid</code> and <code>service</code>. Beyond that, your application can ask for additional standard scopes values which map to sets of related claims : <code>profile</code> <code>email</code> <code>address</code> <code>phone</code><br /> <div class="table-wrapper"><table> <tr> <td><div class="paramName">service</div><div class="paramReq">REQUIRED</div></td><td>It indicates the itsme® service your application intends to use, e.g. <code>service:TEST_code</code> by replacing "TEST_code" with the service code generated during registration.</td> </tr> <tr> <td><div class="paramName">openid</div><div class="paramReq">REQUIRED</div></td><td>It indicates that your application intends to use the OpenID Connect protocol to verify a user's identity by returning a <code>sub</code> claim which represents a unique identifier for the authenticated user.</td> </tr> <tr> <td><div class="paramName">profile</div><div class="paramReq">OPTIONAL</div></td><td>Returns claims that represent basic profile information, specifically <code>family_name</code>, <code>given_name</code>, <code>name</code>, <code>gender</code> and <code>birthdate</code>.</td> </tr> <tr> <td><div class="paramName">email</div><div class="paramReq">OPTIONAL</div></td><td>Returns the <code>email</code> claim, which contains the user's email address, and <code>email_verified</code>, which is a boolean indicating whether the email address was verified by the user.</td> </tr> <tr> <td><div class="paramName">address</div><div class="paramReq">OPTIONAL</div></td><td>Returns the information about the user's postal address. The value of the address member is a JSON structure containing some or all of these members <code>formatted</code> <code>street_address</code> <code>postal_code</code> <code>locality</code> <code>country</code></td> </tr> <tr> <td><div class="paramName">phone</div><div class="paramReq">OPTIONAL</div></td><td>Returns the <code>phone</code> claim, which contains the user's phone number, and <code>phone_number_verified</code>, which is a boolean indicating whether the phone number was verified by the user.</td> </tr> </table></div> </td> </tr> <tr> <td><div class="paramName">redirect_uri</div><div class="paramReq">REQUIRED</div></td> <td>It is the URL to which users are redirected once the authentication is complete. It MUST match the value preregistered during the registration and use the HTTPS scheme. http://localhost is only permitted for development purposes, it’s not for use in production.<br /><br /><b>Note</b> : if relevant (in case you have a mobile app) make sure that your redirect URIs support the Universal links and App links mechanism. Functionally, it will allow you to have only one single link that will either open your desktop web application, your mobile app or your mobile site on the User’s device. Universal links and App links are standard web links (http://mydomain.com) that point to both a web page and a piece of content inside an app. When a Universal Link is opened, the app OS checks to see if any installed app is registered for that domain. If so, the app is launched immediately without ever loading the web page. If not, the web URL is loaded into the webbrowser.</td> </tr> <tr> <td><div class="paramName">state</div><div class="paramReq">Strongly RECOMMENDED</div></td> <td>Specifies any string value that your application uses to maintain state between your Authorization Request and the Authorization Server's response. You can use this parameter for several purposes, such as directing the user to the correct resource in your application and mitigating cross-site request forgery.</td> </tr> <tr> <td><div class="paramName">nonce</div><div class="paramReq">Strongly RECOMMENDED</div></td> <td>A string value used to associate a session with an ID Token, and to mitigate replay attacks. The value is passed through unmodified from the Authentication Request to the ID Token.</td> </tr> <tr> <td><div class="paramName">claims</div><div class="paramReq">OPTIONAL</div></td> <td>Requests specific user's details to be returned from the UserInfo Endpoint and/or in the ID Token. It is represented as a JSON object that has two members - <code>{"userinfo":{...}</code> and <code>{"id_token":{...}</code>, which content indicates which claims to return at the UserInfo Endpoint and which with the ID Token, together with indication whether the claim is voluntary (default) or essential.<br /><br />Possible user's details your application can request is listed below.<br /> <div class="table-wrapper"><table> <tr> <td><div class="paramName">name</div><div class="paramReq">OPTIONAL</div></td><td>User's full name in displayable form including all name parts, possibly including titles and suffixes</td> </tr> <tr> <td><div class="paramName">given_name</div><div class="paramReq">OPTIONAL</div></td><td>Given name(s) or first name(s) of the user. Note that in some cultures, people can have multiple given names; all can be present, with the names being separated by space characters.</td> </tr> <tr> <td><div class="paramName">family_name</div><div class="paramReq">OPTIONAL</div></td><td>Surname(s) or last name(s) of the user. Note that in some cultures, people can have multiple family names or no family name; all can be present, with the names being separated by space characters.</td> </tr> <tr> <td><div class="paramName">birtdate</div><div class="paramReq">OPTIONAL</div></td><td>User's birthday, represented as a YYYY-MM-DD format.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/birthdate_as_string</div><div class="paramReq">OPTIONAL</div></td><td>User's birthday, represented as a string.</td> </tr> <tr> <td><div class="paramName">gender</div><div class="paramReq">OPTIONAL</div></td><td>User's gender. Possible values are : <code>F</code> <code>M</code></td> </tr> <tr> <td><div class="paramName">email</div><div class="paramReq">OPTIONAL</div></td><td>User's email address.</td> </tr> <tr> <td><div class="paramName">email_verified</div><div class="paramReq">OPTIONAL</div></td><td><code>true</code> if the user's e-mail address is verified; otherwise <code>false</code>.</td> </tr> <tr> <td><div class="paramName">phone_number</div><div class="paramReq">OPTIONAL</div></td><td>User's phone number, in <a href="https://en.wikipedia.org/wiki/E.164" target="blank">E.164</a> format.</td> </tr> <tr> <td><div class="paramName">phone_number_verified</div><div class="paramReq">OPTIONAL</div></td><td><code>true</code> if the user's e-phone number is verified; otherwise <code>false</code>.</td> </tr> <tr> <td><div class="paramName">address</div><div class="paramReq">OPTIONAL</div></td><td>Returns the information about the user's postal address. The value of the address is a JSON structure containing some or all of these members <code>formatted</code> <code>street_address</code> <code>postal_code</code> <code>locality</code> <code>country</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/claim_citizenship</div><div class="paramReq">OPTIONAL</div></td><td>The jurisdiction that has conferred citizenship rights to the user, in <a href="https://en.wikipedia.org/wiki/ISO_3166" target="blank">ISO 3166</a> format.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/place_of_birth</div><div class="paramReq">OPTIONAL</div></td><td>The location where the user was born. The value of this attribute is a JSON structure containing some or all of these members <code>formatted</code> <code>city</code> <code>country</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/physical_person_photo</div><div class="paramReq">OPTIONAL</div></td><td>XXX</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/BEeidSn</div><div class="paramReq">OPTIONAL</div></td><td>Returns the Belgian ID card number, 12 digits in the form xxx-xxxxxxx-yy. The check-number yy is the remainder of the division of xxxxxxxxxx by 97.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/claim_device</div><div class="paramReq">OPTIONAL</div></td><td>Returns information about the user's phone. The value of this attribute is a JSON structure containing some or all of these members <code>os</code> <code>appName</code> <code>appRelease</code> <code>deviceLabel</code> <code>debugEnabled</code> <code>deviceID</code> <code>osRelease</code> <code>manufacturer</code> <code>hasSimEnabled</code> <code>deviceLockLevel</code> <code>smsEnabled</code> <code>rooted</code> <code>imei</code> <code>deviceModel</code> <code>sdkRelease</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/transaction_info</div><div class="paramReq">OPTIONAL</div></td><td>Returns information about the itsme® transaction. The value of this attribute is a JSON structure containing some or all of these members <code>securityLevel</code> <code>bindLevel</code> <code>appRelease</code>.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/BENationalNumber</div><div class="paramReq">OPTIONAL</div></td><td>Returns an unique identification number of natural persons who are registered in Belgium. This number consists of 11 digits of the form yy.mm.dd-xxx.cd where yy.mm.dd is the birthdate of the person, xxx a sequential number (odd for males and even for females) and cd a check-digit.</td> </tr> <tr> <td><div class="paramName">http://itsme.services/v2/<br />claim/claim_nl_bsn</div><div class="paramReq">OPTIONAL</div></td><td>Returns the citizen service number, a unique registration number for everyone who lives in the Netherlands. This number consists of 8 to 9 digits.</td> </tr> </table></div> </td> </tr> <tr> <td><div class="paramName">request_uri</div><div class="paramReq">OPTIONAL</div></td> <td>A URL using the https scheme referencing a resource containing a JWT whose claims are the request parameters. The <code>request_uri</code> parameter is used to secure parameters in the authentication request from tainting or inspection when sending the request to the itsme® Authorization Endpoint.<br /><br />If used, the JWT MUST be signed.<!--This is the only difference regarding JWKSet text--></td> </tr> </tbody> </table></div> <p><a id="AuthNResp"></a></p> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p><code>302</code> <code>application/x-www-form-urlencoded</code></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">code</div><div class="paramReq"></div></td> <td>An intermediate opaque credential used to retrieve the ID Token and Access Token.<br /><br /><b>Note</b> : the code has a lifetime of 3 minutes.</td> </tr> <tr> <td><div class="paramName">state</div><div class="paramReq"></div></td> <td>The string value provided in the Authorization Request. You SHOULD validate that the value returned matches the one supplied.</td> </tr> </tbody> </table></div> </li> </ul> <h3 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h3> <ul class="tab" data-tab="4075323e-a8ec-4cb5-9bb3-c1ad3f5abe74"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="4075323e-a8ec-4cb5-9bb3-c1ad3f5abe74"> <li class="active"> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">GET</span> <span class="nn">/authorize</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">server.example.com</span>

response_type=code
  &amp;client_id=s6BhdRkqt3
  &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
  &amp;scope=openid%20service:TEST_code%20profile%20email
  &amp;nonce=n-0S6_WzA2Mj
  &amp;state=af0ifjsldkj
  &amp;acr_values=http://itsme.services/V2/claim/acr_basic
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://client.example.org/cb?</span>
<span class="s">  code=SplxlOBeZQQYbYS6WxSbIA</span>
<span class="s">  &amp;state=af0ifjsldkj</span>
</code></pre></div></div> </li> <li> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">GET</span> <span class="nn">/authorize</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">server.example.com</span>

response_type=code
  &amp;client_id=s6BhdRkqt3
  &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
  &amp;scope=openid%20service:TEST_code%20profile%20email
  &amp;nonce=n-0S6_WzA2Mj
  &amp;state=af0ifjsldkj
  &amp;acr_values=http://itsme.services/V2/claim/acr_basic
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://client.example.org/cb?</span>
<span class="s">  code=SplxlOBeZQQYbYS6WxSbIA</span>
<span class="s">  &amp;state=af0ifjsldkj</span>
</code></pre></div></div> </li> </ul> <p><a id="TokenReq"></a></p> <h2 id="token-request"> <a href="#token-request" class="anchor-heading" aria-labelledby="token-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Token Request </h2> <ul class="tab" data-tab="8155749d-a5cb-43c8-bcac-14c50eb538da"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="8155749d-a5cb-43c8-bcac-14c50eb538da"> <li class="active"> <p><b><code>POST https://idp.<i>[e2e/prd]</i>.itsme.services/v2/token</code></b></p> <p>To assert the identity of the user, the <code>code</code> received previously needs to be exchanged for an ID token and access token. During this step, your application has to authenticate itself to our server using RSA keys.</p> <h3 id="parameters"> <a href="#parameters" class="anchor-heading" aria-labelledby="parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parameters </h3> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">grant_type</div><div class="paramReq">REQUIRED</div></td> <td>Set this to <code>authorization_code</code> to tell the Token Endpoint that your application wants to exchange an authorization code for an ID koken and access token. </td> </tr> <tr> <td><div class="paramName">code</div><div class="paramReq">REQUIRED</div></td> <td>The intermediate opaque credential received in the Authorization Response.</td> </tr> <tr> <td><div class="paramName">redirect_uri</div><div class="paramReq">REQUIRED</div></td> <td>It is the URL to which users are redirected once the authentication is complete. It MUST match the value used in the Authorization Request.</td> </tr> <tr> <td><div class="paramName">client_assertion_type</div><div class="paramReq">REQUIRED</div></td> <td>Specifies the type of assertion. Set this to <code>urn:ietf:params:oauth:client-assertion-type:jwt-bearer</code>.</td> </tr> <tr> <td><div class="paramName">client_assertion</div><div class="paramReq">REQUIRED</div></td> <td>Contains a JWT token that is signed, and then encrypted, using the client RSA keys. This ensures that the request to get the id token and access token is made only from your application, and not from a potential attacker that may have intercepted the authorization code.<br /><br />The JWT contains the following claims.<br /> <div class="table-wrapper"><table> <tr> <td><div class="paramName">iss</div><div class="paramReq">REQUIRED</div></td><td>The issuer of the token. This value must be the same as the <code>client_id</code>.</td> </tr> <tr> <td><div class="paramName">sub</div><div class="paramReq">REQUIRED</div></td><td>The subject of the token. This value must be the same as the <code>client_id</code>.</td> </tr> <tr> <td><div class="paramName">aud</div><div class="paramReq">OPTIONAL</div></td><td>The full URL of the resource you're using the JWT to authenticate to. Set this to <code>https://idp.<i>[e2e/prd]</i>.itsme.services/v2/token</code>.</td> </tr> <tr> <td><div class="paramName">jti</div><div class="paramReq">OPTIONAL</div></td><td>An unique identifier for the token, containing maximum 255 characters.</td> </tr> <tr> <td><div class="paramName">exp</div><div class="paramReq">OPTIONAL</div></td><td>The expiration time of the token in seconds since January 1, 1970 UTC.</td> </tr> </table></div> </td> </tr> </tbody> </table></div> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p><code>200</code> <code>application/json</code></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">access_token</div><div class="paramReq"></div></td> <td>Allows an application to retrieve consented user information from the UserInfo Endpoint.</td> </tr> <tr> <td><div class="paramName">token_type</div><div class="paramReq"></div></td> <td>Provides your application with the information required to successfully utilize the access token. Returned value is <code>Bearer</code>..</td> </tr> <tr> <td><div class="paramName">id_token</div><div class="paramReq"></div></td> <td>A security token that contains information about the authentication of an user, and potentially other requested claim data's. The <code>id_token</code> value is represented as a signed and encrypted JSON Web Token. So, before being able to use the ID Token claim's you will have to decrypt and verify it using the RSA keys.</td> </tr> </tbody> </table></div> </li> <li> <p><b><code>POST https://oidc.<i>[e2e/prd]</i>.itsme.services/clientsecret-oidc/csapi/v0.1/connect/token</code></b></p> <p>To asserts the identity of the user, the <code>code</code> received previously need to be exchanged for an ID token and access token. During this step, your application has to authenticate itself to our server using a symmetric key.</p> <h3 id="parameters"> <a href="#parameters" class="anchor-heading" aria-labelledby="parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parameters </h3> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">grant_type</div><div class="paramReq">REQUIRED</div></td> <td>Set this to <code>authorization_code</code> to tell the Token Endpoint that your application wants to exchange an authorization code for an ID koken and access token. </td> </tr> <tr> <td><div class="paramName">client_id</div><div class="paramReq">REQUIRED</div></td> <td>It identifies your application. This parameter value is generated during registration.</td> </tr> <tr> <td><div class="paramName">code</div><div class="paramReq">REQUIRED</div></td> <td>The intermediate opaque credential received in the Authorization Response.</td> </tr> <tr> <td><div class="paramName">redirect_uri</div><div class="paramReq">REQUIRED</div></td> <td>It is the URL to which users are redirected once the authentication is complete. It MUST match the value used in the Authorization Request.</td> </tr> <tr> <td><div class="paramName">client_secret</div><div class="paramReq">REQUIRED</div></td> <td>Contains the a key you reveiced when registering your application. This ensures that the request to get the id token and access token is made only from your application, and not from a potential attacker that may have intercepted the authorization code.</td> </tr> </tbody> </table></div> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p><code>200</code> <code>application/json</code></p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">access_token</div><div class="paramReq"></div></td> <td>Allows an application to retrieve consented user information from the UserInfo Endpoint.</td> </tr> <tr> <td><div class="paramName">token_type</div><div class="paramReq"></div></td> <td>Provides your application with the information required to successfully utilize the access token. Returned value is <code>Bearer</code>.</td> </tr> <tr> <td><div class="paramName">id_token</div><div class="paramReq"></div></td> <td>A security token that contains information about the authentication of an user, and potentially other requested claim data's. The <code>id_token</code> value is represented as a signed JSON Web Token. So, before being able to use the ID Token claim's you will have to verify it using the symmetric key.</td> </tr> </tbody> </table></div> </li> </ul> <h3 id="example-1"> <a href="#example-1" class="anchor-heading" aria-labelledby="example-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h3> <ul class="tab" data-tab="ed25c500-2339-4de9-aaf2-5d3f03c964a0"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="ed25c500-2339-4de9-aaf2-5d3f03c964a0"> <li class="active"> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">openid.c2id.com</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>

grant_type=authorization_code
 &amp;code=SplxlOBeZQQYbYS6WxSbIA
 &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
 &amp;client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer
 &amp;client_assertion=PHNhbWxwOl ... ZT
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc
    yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5
    NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ
    fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz
    AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q
    Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ
    NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd
    QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS
    K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4
    XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg"</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SlAV32hkKG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> </li> <li> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">openid.c2id.com</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>

grant_type=authorization_code
 &amp;code=SplxlOBeZQQYbYS6WxSbIA
 &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
 &amp;client_id=s6BhdRkqt3
 &amp;client_secret=PHNhbWxwOl ... ZT
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc
    yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5
    NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ
    fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz
    AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q
    Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ
    NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd
    QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS
    K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4
    XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg"</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SlAV32hkKG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> </li> </ul> <p><a id="UserInfoReq"></a></p> <h2 id="userinfo-request"> <a href="#userinfo-request" class="anchor-heading" aria-labelledby="userinfo-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> UserInfo Request </h2> <ul class="tab" data-tab="dc0f1e20-2287-4f1e-bc2b-9ce392685967"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="dc0f1e20-2287-4f1e-bc2b-9ce392685967"> <li class="active"> <p><b><code>GET https://idp.<i>[e2e/prd]</i>.itsme.services/v2/userinfo</code></b></p> <p>The UserInfo Endpoint returns previously consented user profile information to your application. In other words, if the required claims are not returned in the ID Token, you can obtain the additional claims by presenting the access token to the itsme® UserInfo Endpoint. This is achieved by sending a HTTP GET request to the Userinfo Endpoint, passing the access token value in the Authorization header using the Bearer authentication scheme.</p> <p>This is illustrated in the example below.</p> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p>The UserInfo Response is a signed and encrypted JSON Web Token. So, before being able to extract the claims you will have to decrypt and verify it using the RSA keys.</p> </li> <li> <p><b><code>GET https://oidc.<i>[e2e/prd]</i>.itsme.services/clientsecret-oidc/csapi/v0.1/connect/userinfo</code></b></p> <p>The UserInfo Endpoint returns previously consented user profile information to your application. In other words, if the required claims are not returned in the ID Token, you can obtain the additional claims by presenting the access token to the itsme® UserInfo Endpoint. This is achieved by sending a HTTP GET request to the Userinfo Endpoint, passing the access token value in the Authorization header using the Bearer authentication scheme.</p> <p>This is illustrated in the example below.</p> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p>The UserInfo Response is a signed JSON Web Token. So, before being able to extract the claims you will have to verify it using the symmetric key.</p> </li> </ul> <h3 id="example-2"> <a href="#example-2" class="anchor-heading" aria-labelledby="example-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h3> <ul class="tab" data-tab="fe9ab49f-5bc0-438b-81fc-976d9822ac6e"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="fe9ab49f-5bc0-438b-81fc-976d9822ac6e"> <li class="active"> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">GET</span> <span class="nn">/userinfo</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">server.example.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer SlAV32hkKG</span>
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"248289761001"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"given_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"family_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"preferred_username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j.doe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"janedoe@example.com"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"picture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/janedoe/me.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div> </li> <li> <p><strong><em>Request</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">GET</span> <span class="nn">/userinfo</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">server.example.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer SlAV32hkKG</span>
</code></pre></div></div> <p><strong><em>Response</em></strong></p> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="w">  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"248289761001"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"given_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"family_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"preferred_username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"j.doe"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"janedoe@example.com"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"picture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/janedoe/me.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div> </li> </ul> <h2 id="revoke-request"> <a href="#revoke-request" class="anchor-heading" aria-labelledby="revoke-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Revoke Request </h2> <ul class="tab" data-tab="d1079861-c1fc-4167-9080-4c138813d741"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric keys </a> </li> </ul> <ul class="tab-content" id="d1079861-c1fc-4167-9080-4c138813d741"> <li class="active"> <p>Not applicable.</p> </li> <li> <p><b><code>POST https://oidc.<i>[e2e/prd]</i>.itsme.services/clientsecret-oidc/csapi/v0.1/connect/revoke</code></b></p> <p>The Revocation Endpoint enables your application to notify itsme® that a previously obtained access token is no longer needed and MUST be revoked.</p> <p>### Parameters</p> <div class="table-wrapper"><table> <tbody> <tr> <td><div class="paramName">client_id</div><div class="paramReq">REQUIRED</div></td> <td>It identifies your application. This parameter value is generated during registration.</td> </tr> <tr> <td><div class="paramName">client_secret</div><div class="paramReq">REQUIRED</div></td> <td>Contains the a key you reveiced when registering your application.</td> </tr> <tr> <td><div class="paramName">token</div><div class="paramReq">REQUIRED</div></td> <td>The <code>access_token</code> previously obtained that you want to revoke.</td> </tr> <tr> <td><div class="paramName">token_type_hint</div><div class="paramReq">OPTIONAL</div></td> <td>If used, this is set to <code>access_token</code> because itsme® API don't support refresh tokens.</td> </tr> </tbody> </table></div> <h3 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h3> <p>The response is very simple: it’s always an HTTP 200 if the token is revoked or unknown.</p> </li> </ul> <h3 id="example-3"> <a href="#example-3" class="anchor-heading" aria-labelledby="example-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h3> <ul class="tab" data-tab="23b24dcb-01d0-4fb0-b3a1-22604e929ede"> <li class="active"> <a href="">RSA keys </a> </li> <li> <a href="">Symmetric key </a> </li> </ul> <ul class="tab-content" id="23b24dcb-01d0-4fb0-b3a1-22604e929ede"> <li class="active"> <p>Not applicable.</p> </li> <li> <p><strong><em>Request</em></strong></p> <p><strong><em>Response</em></strong></p> </li> </ul> </div> </div> <div class="search-overlay"></div> </div> <script src="../public/js/tabs.js"></script> </body> </html>
